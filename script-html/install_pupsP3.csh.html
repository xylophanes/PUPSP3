<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
<title>/usr/local/src/pupsp3-5.5.1.src.git/pupscore.src/install_pupsP3.csh.html</title>
<meta name="Generator" content="Vim/7.4">
<meta name="plugin-version" content="vim7.4_v1">
<meta name="syntax" content="csh">
<meta name="settings" content="use_css,pre_wrap,no_foldcolumn,prevent_copy=">
<meta name="colorscheme" content="none">
<style type="text/css">
<!--
pre { white-space: pre-wrap; font-family: monospace; color: #000000; background-color: #ffffff; }
body { font-family: monospace; color: #000000; background-color: #ffffff; }
* { font-size: 1em; }
.Comment { color: #0000c0; }
.Constant { color: #c00000; }
.Special { color: #c000c0; }
.Statement { color: #af5f00; }
.Type { color: #008000; }
-->
</style>

<script type='text/javascript'>
<!--

-->
</script>
</head>
<body>
<pre id='vimCodeElement'>
<span class="Comment">#!/bin/tcsh </span>
<span class="Comment">#</span>
<span class="Comment">#------------------------------------------------------------------------------</span>
<span class="Comment">#  Install PUPSP3 libraries and service functions</span>
<span class="Comment">#  (C) M.A. O'Neill, Tumbling Dice Ltd, 2000-2023</span>
<span class="Comment">#</span>
<span class="Comment">#  $1 is build type</span>
<span class="Comment">#  $2 is logfile</span>
<span class="Comment">#  $3 is set to default (if security mode enable and we want default settings)</span>
<span class="Comment">#  $4 is set to debug (to build debuggable system e.g -g)</span>
<span class="Comment">#------------------------------------------------------------------------------</span>

<span class="Statement">set</span> do_abort = FALSE


<span class="Comment">#----------------------------</span>
<span class="Comment"># Check we have gcc installed</span>
<span class="Comment">#----------------------------</span>

<span class="Statement">set</span> no_gcc = <span class="Statement">`/usr/bin/which gcc`</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Constant">&quot;</span><span class="Type">$no_gcc</span><span class="Constant">&quot;</span> <span class="Statement">==</span> <span class="Constant">&quot;&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsp3: cannot find gcc compiler&quot;</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>

	<span class="Statement">set</span> do_abort = TRUE
<span class="Statement">endif</span>


<span class="Comment">#-------------------------------</span>
<span class="Comment"># Check we have patch installed</span>
<span class="Comment">#-------------------------------</span>

<span class="Statement">set</span> no_patch = <span class="Statement">`/usr/bin/which patch`</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Constant">&quot;</span><span class="Type">$no_patch</span><span class="Constant">&quot;</span> <span class="Statement">==</span> <span class="Constant">&quot;&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsp3: cannot find patch&quot;</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>

	<span class="Statement">set</span> do_abort = TRUE
<span class="Statement">endif</span>


<span class="Comment">#-----------------------------</span>
<span class="Comment"># Check we have sudo installed</span>
<span class="Comment">#-----------------------------</span>

<span class="Statement">set</span> no_sudo = <span class="Statement">`/usr/bin/which sudo`</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Constant">&quot;</span><span class="Type">$no_sudo</span><span class="Constant">&quot;</span> <span class="Statement">==</span> <span class="Constant">&quot;&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsp3: cannot find sudo&quot;</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>

	<span class="Statement">set</span> do_abort = TRUE
<span class="Statement">endif</span>


<span class="Comment">#------------------------------------------</span>
<span class="Comment"># Check we have the libraries which we need</span>
<span class="Comment">#------------------------------------------</span>
<span class="Comment">#---------------------</span>
<span class="Comment"># BSD function support</span>
<span class="Comment">#---------------------</span>

<span class="Statement">set</span> no_bsd = <span class="Statement">`gcc -lbsd |&amp; grep cannot`</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Constant">&quot;</span><span class="Type">$no_bsd</span><span class="Constant">&quot;</span> <span class="Statement">!=</span> <span class="Constant">&quot;&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsp3: cannot find required library libbsd&quot;</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>

	<span class="Statement">set</span> do_abort = TRUE
<span class="Statement">endif</span>


<span class="Comment">#-------------</span>
<span class="Comment"># GNU readline</span>
<span class="Comment">#-------------</span>

<span class="Statement">set</span> no_readline = <span class="Statement">`gcc -lreadline |&amp; grep cannot`</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Constant">&quot;</span><span class="Type">$no_readline</span><span class="Constant">&quot;</span> <span class="Statement">!=</span> <span class="Constant">&quot;&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsp3: cannot find required library libreadline&quot;</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>

	<span class="Statement">set</span> do_abort = TRUE
<span class="Statement">endif</span>


<span class="Comment">#-----</span>
<span class="Comment"># TIFF</span>
<span class="Comment">#-----</span>

<span class="Statement">set</span> no_tiff = <span class="Statement">`gcc -ltiff |&amp; grep cannot`</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Constant">&quot;</span><span class="Type">$no_tiff</span><span class="Constant">&quot;</span> <span class="Statement">!=</span> <span class="Constant">&quot;&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsp3: cannot find required library libtiff&quot;</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>

	<span class="Statement">set</span> do_abort = TRUE
<span class="Statement">endif</span>


<span class="Comment">#--------------------------------------------------</span>
<span class="Comment"># Abort if build environment has missing components</span>
<span class="Comment">#--------------------------------------------------</span>

<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$do_abort</span> <span class="Statement">==</span> TRUE<span class="Statement">)</span> <span class="Statement">then</span>
	<span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>


<span class="Comment">#-----------------------------</span>
<span class="Comment">#  Build in checkpoint support</span>
<span class="Comment">#-----------------------------</span>

<span class="Statement">set</span> build_ckpt      = FALSE


<span class="Comment">#--------------------------------------------------</span>
<span class="Comment">#  This can be set to float or double and controls</span>
<span class="Comment">#  floating point precision in P3 libraries</span>
<span class="Comment">#--------------------------------------------------</span>

<span class="Statement">set</span> ftype           = FLOAT


<span class="Comment">#-------------------------------------------</span>
<span class="Comment">#  Set MACHTYPE if it isn't defined (e.g. on</span>
<span class="Comment">#  Raspberry-Pi running Raspbian)</span>
<span class="Comment">#-------------------------------------------</span>

<span class="Comment">#set usable_machtype = `echo $MACHTYPE | grep unknown`</span>
<span class="Comment">#if($usable_machtype != &quot;&quot;) then</span>
	<span class="Statement">set</span> MACHTYPE = <span class="Statement">`uname -a | awk '{print $13}'`</span>
<span class="Comment">#endif</span>


<span class="Comment">#------------------------------------------------------</span>
<span class="Comment"># Correct &quot;namecreep&quot; in 32 bit Intel/AMD architectures</span>
<span class="Comment">#------------------------------------------------------</span>

<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$MACHTYPE</span> <span class="Statement">==</span> i686<span class="Statement">)</span> <span class="Statement">then</span>
	<span class="Statement">set</span> MACHTYPE = i386
<span class="Statement">endif</span>


<span class="Comment">#----------------------------------------------</span>
<span class="Comment"># Make sure we use the right configuration file</span>
<span class="Comment">#----------------------------------------------</span>

rm -f ../config/<span class="Type">$OSTYPE</span>.cluster                                                                 				<span class="Statement">&gt;&amp;</span>  /dev/null
rm -f ../config/linux.cluster													<span class="Statement">&gt;&amp;</span>  /dev/null
rm -f ../config.install/<span class="Type">$OSTYPE</span>.cluster                                                         				<span class="Statement">&gt;&amp;</span>  /dev/null
rm -f ../config.install/linux.cluster												<span class="Statement">&gt;&amp;</span>  /dev/null
rm -f ../config.debug/<span class="Type">$OSTYPE</span>.cluster                                                           				<span class="Statement">&gt;&amp;</span>  /dev/null
rm -f ../config.debug/linux.cluster                                                             				<span class="Statement">&gt;&amp;</span>  /dev/null

<span class="Statement">onintr</span> abort_build


<span class="Comment">#----------------------------</span>
<span class="Comment"># Stop complaints from loader</span>
<span class="Comment">#----------------------------</span>

<span class="Statement">setenv</span> LD_LIBRARY_PATH


<span class="Comment">#-------------------</span>
<span class="Comment"># Initialise logfile</span>
<span class="Comment">#-------------------</span>

<span class="Statement">if</span><span class="Statement">(</span>$<span class="Comment"># == 0 || $1 == help || $1 == usage || $# == 0) then</span>
	echo <span class="Constant">&quot;&quot;</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    P3-2023 (SUP3) build script (C) M.A. O'Neill, Tumbling Dice Ltd 2023&quot;</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    Usage: install_pupsP3 [usage] | [clean] | [vanilla | cluster] [tty | logfile]&quot;</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;                          [default | nodefault] [debug]&quot;</span>

	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>

	<span class="Statement">exit</span> <span class="Constant">0</span>
<span class="Statement">else</span> <span class="Statement">if</span> <span class="Statement">(</span><span class="Type">$1</span> <span class="Statement">==</span> clean<span class="Statement">)</span> <span class="Statement">then</span>

	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    ... cleaning build tree&quot;</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>

	\rm -f  *.a														<span class="Statement">&gt;&amp;</span>  /dev/null
	\rm -f  *.o														<span class="Statement">&gt;&amp;</span>  /dev/null
	\rm -f  *.so														<span class="Statement">&gt;&amp;</span>  /dev/null
	\rm -rf ../lib*														<span class="Statement">&gt;&amp;</span>  /dev/null
	\rm -rf ../bin*														<span class="Statement">&gt;&amp;</span>  /dev/null
	\rm -f ../config/*linux.cluster												<span class="Statement">&gt;&amp;</span>  /dev/null
	\rm -f ../config.debug/*linux.cluster											<span class="Statement">&gt;&amp;</span>  /dev/null
	\rm -f ../config.install/*linux.cluster											<span class="Statement">&gt;&amp;</span>  /dev/null
	\rm -f BUILDLOCK													<span class="Statement">&gt;&amp;</span>  /dev/null
	\rm -f Makefile														<span class="Statement">&gt;&amp;</span>  /dev/null

	<span class="Statement">exit</span> <span class="Constant">0</span>
<span class="Statement">else</span> <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$2</span> <span class="Statement">==</span> default <span class="Statement">||</span> <span class="Type">$2</span> <span class="Statement">==</span> <span class="Constant">&quot;&quot;</span> <span class="Statement">||</span> <span class="Type">$2</span> <span class="Statement">==</span> null <span class="Statement">||</span> <span class="Type">$2</span> <span class="Statement">==</span> <span class="Statement">/</span>dev<span class="Statement">/</span>null<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">set</span> logFile = /dev/null
<span class="Statement">else</span> <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$2</span> <span class="Statement">==</span> <span class="Constant">&quot;tty&quot;</span> <span class="Statement">||</span> <span class="Type">$2</span> <span class="Statement">==</span> <span class="Statement">/</span>dev<span class="Statement">/</span>tty<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">set</span> logFile = /dev/tty
<span class="Statement">else</span>
        <span class="Statement">set</span> logFile = $2


        <span class="Statement">if</span><span class="Statement">(!</span> <span class="Type">$?cshlevel</span><span class="Statement">)</span> <span class="Statement">then</span>
                <span class="Statement">setenv</span> cshlevel <span class="Constant">1</span>
                <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>														<span class="Statement">&gt;&amp;</span>  <span class="Type">$logFile</span>
        <span class="Statement">endif</span>
<span class="Statement">endif</span>


<span class="Comment">#---------------------------------------------------------</span>
<span class="Comment"># Make sure we pick up the correct configuration directory</span>
<span class="Comment">#---------------------------------------------------------</span>

<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$4</span> <span class="Statement">==</span> debug<span class="Statement">)</span> <span class="Statement">then</span>
	<span class="Statement">set</span> debug = TRUE
<span class="Statement">else</span> <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$4</span> <span class="Statement">!=</span> <span class="Constant">&quot;&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsp3: 'debug' expected&quot;</span>									<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>

	<span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">else</span>
	<span class="Statement">set</span> debug = FALSE
<span class="Statement">endif</span>

<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$debug</span> <span class="Statement">==</span> FALSE<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">setenv</span> P3_CONFDIR   ../config                                                           				<span class="Statement">&gt;&amp;</span>  /dev/null
        <span class="Statement">setenv</span> PUPS_CONFDIR ../config                                                           				<span class="Statement">&gt;&amp;</span>  /dev/null

        <span class="Statement">set</span> confdir = ../config
<span class="Statement">else</span>
        <span class="Statement">setenv</span> P3_CONFDIR   ../config.debug                                                     				<span class="Statement">&gt;&amp;</span>  /dev/null
        <span class="Statement">setenv</span> PUPS_CONFDIR ../config.debug                                                     				<span class="Statement">&gt;&amp;</span>  /dev/null

        <span class="Statement">set</span> confdir = ../config.debug
<span class="Statement">endif</span>


<span class="Comment">#--------------------------------------------------------------------</span>
<span class="Comment"># Set up configuration links - we also set the default floating point</span>
<span class="Comment"># precision here</span>
<span class="Comment">#--------------------------------------------------------------------</span>

<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$build_ckpt</span> <span class="Statement">==</span> TRUE<span class="Statement">)</span> <span class="Statement">then</span>


	<span class="Comment">#------------------------------</span>
	<span class="Comment"># Build with checkpoint support</span>
	<span class="Comment">#------------------------------</span>

	<span class="Statement">pushd</span> ../config														<span class="Statement">&gt;&amp;</span>  /dev/null
	sed s/FTYPE/<span class="Type">$ftype</span>/g <span class="Statement">&lt;</span><span class="Type">$OSTYPE</span>.cluster.ckpt <span class="Statement">&gt;</span>linux.cluster
	<span class="Statement">popd</span>															<span class="Statement">&gt;&amp;</span>  /dev/null

	<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$debug</span> <span class="Statement">==</span> FALSE<span class="Statement">)</span> <span class="Statement">then</span>
        	<span class="Statement">pushd</span> ../config.install                                                         				<span class="Statement">&gt;&amp;</span>  /dev/null
		sed s/FTYPE/<span class="Type">$ftype</span>/g <span class="Statement">&lt;</span><span class="Type">$OSTYPE</span>.cluster.ckpt <span class="Statement">&gt;</span>linux.cluster
        	<span class="Statement">popd</span>                                                                            				<span class="Statement">&gt;&amp;</span>  /dev/null
	<span class="Statement">else</span>
                <span class="Statement">pushd</span> ../config.debug                                                           				<span class="Statement">&gt;&amp;</span>  /dev/null
                sed s/FTYPE/<span class="Type">$ftype</span>/g <span class="Statement">&lt;</span><span class="Type">$OSTYPE</span>.cluster.ckpt <span class="Statement">&gt;</span>linux.cluster
                <span class="Statement">popd</span>                                                                            				<span class="Statement">&gt;&amp;</span>  /dev/null
        <span class="Statement">endif</span>
<span class="Statement">else</span>

	<span class="Comment">#---------------------------------</span>
	<span class="Comment"># Build without checkpoint support</span>
	<span class="Comment">#---------------------------------</span>

	<span class="Statement">pushd</span> ../config														<span class="Statement">&gt;&amp;</span>  /dev/null
	sed s/FTYPE/<span class="Type">$ftype</span>/g <span class="Statement">&lt;</span><span class="Type">$OSTYPE</span>.cluster.nockpt <span class="Statement">&gt;</span>linux.cluster
	<span class="Statement">popd</span>															<span class="Statement">&gt;&amp;</span>  /dev/null

	<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$debug</span> <span class="Statement">==</span> FALSE<span class="Statement">)</span> <span class="Statement">then</span>
        	<span class="Statement">pushd</span> ../config.install                                                         				<span class="Statement">&gt;&amp;</span>  /dev/null

		sed s/FTYPE/<span class="Type">$ftype</span>/g <span class="Statement">&lt;</span><span class="Type">$OSTYPE</span>.cluster.nockpt <span class="Statement">&gt;</span>linux.cluster
        	<span class="Statement">popd</span>                                                                            				<span class="Statement">&gt;&amp;</span>  /dev/null
	<span class="Statement">else</span>
        	<span class="Statement">pushd</span> ../config.debug                                                           				<span class="Statement">&gt;&amp;</span>  /dev/null
		sed s/FTYPE/<span class="Type">$ftype</span>/g <span class="Statement">&lt;</span><span class="Type">$OSTYPE</span>.cluster.nockpt <span class="Statement">&gt;</span>linux.cluster
        	<span class="Statement">popd</span>                                                                            				<span class="Statement">&gt;&amp;</span>  /dev/null
	<span class="Statement">endif</span>
<span class="Statement">endif</span>


<span class="Comment">#------------------------------</span>
<span class="Comment"># Get number of processor cores</span>
<span class="Comment">#------------------------------</span>

<span class="Statement">set</span> nCores = <span class="Statement">`lscpu | grep &quot;CPU(s):&quot; | head -1 | awk '{print $2}'`</span>


<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    P3-2023 (SUP3) build script (C) M.A. O'Neill, Tumbling Dice Ltd 2023&quot;</span>							<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$debug</span> <span class="Statement">==</span> TRUE<span class="Statement">)</span> <span class="Statement">then</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    Configuring P3-2023 for &quot;</span><span class="Type">$MACHTYPE</span>-<span class="Type">$OSTYPE</span>-gnu <span class="Constant">&quot;host (debug mode)&quot;</span>						<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    </span><span class="Type">$nCores</span><span class="Constant"> processor cores found&quot;</span>										<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">else</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    Configuring P3-2023 for &quot;</span><span class="Type">$MACHTYPE</span>-<span class="Type">$OSTYPE</span>-gnu <span class="Constant">&quot;host&quot;</span>								<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    </span><span class="Type">$nCores</span><span class="Constant"> processor cores found&quot;</span>										<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">endif</span>

<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$ftype</span> <span class="Statement">==</span> FLOAT<span class="Statement">)</span> <span class="Statement">then</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    Floating point precision for PUPS/P3 is 'float' (4 bytes)&quot;</span>							<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">else</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    Floating point precision for PUPS/P3 is 'double' (8 bytes)&quot;</span>							<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">endif</span>

<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$build_ckpt</span> <span class="Statement">==</span> TRUE<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    Checkpointing support enabled&quot;</span>                                                				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">endif</span>



<span class="Comment">#-------------------</span>
<span class="Comment">#  Set security mode</span>
<span class="Comment">#-------------------</span>

<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$3</span> <span class="Statement">==</span> default<span class="Statement">)</span> <span class="Statement">then</span>
	<span class="Statement">set</span> securitymode = default
<span class="Statement">else</span> <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$3</span> <span class="Statement">!=</span> <span class="Constant">&quot;&quot;</span> <span class="Statement">&amp;&amp;</span> <span class="Type">$3</span> <span class="Statement">!=</span> default <span class="Statement">&amp;&amp;</span> <span class="Type">$3</span> <span class="Statement">!=</span> nodefault<span class="Statement">)</span> <span class="Statement">then</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: expecting 'default'&quot;</span>									<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    Usage: install_pupsP3 [usage] | [clean] | [[vanilla | cluster] [tty | logfile]&quot;</span>				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;                          [default | nodefault] [debug]&quot;</span>								<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

	<span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">else</span>
	<span class="Statement">set</span> securitymode = <span class="Constant">&quot;&quot;</span>
<span class="Statement">endif</span>


<span class="Comment">#--------------------------------------</span>
<span class="Comment"># Distribution installation directories</span>
<span class="Comment">#--------------------------------------</span>
<span class="Comment">#-----</span>
<span class="Comment"># Root</span>
<span class="Comment">#-----</span>

<span class="Statement">if</span><span class="Statement">(</span><span class="Statement">`whoami`</span> <span class="Statement">==</span> <span class="Constant">&quot;root&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>

	<span class="Comment">#----------------</span>
	<span class="Comment"># Root is special</span>
	<span class="Comment">#----------------</span>

        <span class="Statement">set</span> PROJECTDIR    = /p3
	<span class="Statement">set</span> BINDIR	  = /usr/bin


	<span class="Comment">#----------------------------------------</span>
	<span class="Comment"># Test for 64 bit architecture and adjust</span>
	<span class="Comment"># LIBDIR if found</span>
	<span class="Comment">#----------------------------------------</span>
	<span class="Comment">#-------</span>
	<span class="Comment"># 64 bit</span>
	<span class="Comment">#------- </span>
	<span class="Statement">if</span><span class="Statement">(</span><span class="Statement">`uname -a | awk '{print $13}'`</span> <span class="Statement">==</span> x86_64 <span class="Statement">||</span> <span class="Statement">`uname -a | awk '{print $13}'`</span> <span class="Statement">==</span> aarch64<span class="Statement">)</span> <span class="Statement">then</span>
		<span class="Statement">set</span> LIBDIR  = /usr/lib64


	<span class="Comment">#-------</span>
	<span class="Comment"># 32 bit</span>
	<span class="Comment">#-------</span>

	<span class="Statement">else</span>
		<span class="Statement">set</span> LIBDIR  = /usr/lib
	<span class="Statement">endif</span>

        <span class="Statement">set</span> INCDIR        = /usr/include
	<span class="Statement">set</span> HDRDIR	  = /usr/include/p3
	<span class="Statement">set</span> MANDIR	  = /usr/share/man
	<span class="Statement">set</span> projectPath   = \&quot;\/p3\&quot;


	<span class="Comment">#------------------------------------------</span>
	<span class="Comment"># Install virt-what patch and sudoers file </span>
	<span class="Comment">#------------------------------------------</span>

	patch -p1 /usr/sbin/virt-what <span class="Statement">&lt;</span> virt-what.mao.patch      								<span class="Statement">&gt;&amp;</span> /dev/null

	\mv /etc/sudoers /etc/sudoers                   									<span class="Statement">&gt;&amp;</span> /dev/null
	\cp sudoers     /etc/sudoers                   										<span class="Statement">&gt;&amp;</span> /dev/null

	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    ... Installed PUP/P3 specific sudoers file and patched virt-what&quot;</span>						<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>


<span class="Comment">#------------</span>
<span class="Comment"># Normal user</span>
<span class="Comment">#------------</span>

<span class="Statement">else</span>
	<span class="Statement">set</span> PROJECTDIR    = $HOME/p3
	<span class="Statement">set</span> BINDIR        = $HOME/bin


	<span class="Comment">#----------------------------------------</span>
	<span class="Comment"># Test for 64 bit architecture and adjust</span>
	<span class="Comment"># LIBDIR if found</span>
	<span class="Comment">#----------------------------------------</span>
	<span class="Comment">#-------</span>
	<span class="Comment"># 64 bit</span>
	<span class="Comment">#-------</span>
	<span class="Statement">if</span><span class="Statement">(</span><span class="Statement">`uname -a | awk '{print $13}'`</span> <span class="Statement">==</span> x86_64 <span class="Statement">||</span> <span class="Statement">`uname -a | awk '{print $13}'`</span> <span class="Statement">==</span> aarch64<span class="Statement">)</span> <span class="Statement">then</span>
		<span class="Statement">set</span> LIBDIR = $HOME/lib64


	<span class="Comment">#-------</span>
	<span class="Comment"># 32 bit</span>
	<span class="Comment">#-------</span>

	<span class="Statement">else</span>
		<span class="Statement">set</span> LIBDIR = $HOME/lib
	<span class="Statement">endif</span>

        <span class="Statement">set</span> INCDIR        = $HOME/include
	<span class="Statement">set</span> HDRDIR	  = $HOME/include/p3
	<span class="Statement">set</span> MANDIR        = $HOME/man
	<span class="Statement">set</span> projectPath   = \&quot;$HOME/p3\&quot;
<span class="Statement">endif</span>


<span class="Comment">#--------------------------------------------------</span>
<span class="Comment"># We need to make any directories which we may need</span>
<span class="Comment">#--------------------------------------------------</span>

<span class="Statement">if</span><span class="Statement">(!</span> <span class="Statement">-</span>e <span class="Type">$PROJECTDIR</span><span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ... Creating '</span><span class="Type">$PROJECTDIR</span><span class="Constant">' (PUPS/P3 project templates directory)&quot;</span>						<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        mkdir <span class="Type">$PROJECTDIR</span>													<span class="Statement">&gt;&amp;</span>  /dev/null


	<span class="Comment">#-----------------------------</span>
	<span class="Comment"># Allow normal users to create</span>
	<span class="Comment"># default configurations</span>
	<span class="Comment">#-----------------------------</span>

	chmod <span class="Constant">0777</span> <span class="Type">$PROJECTDIR</span>													<span class="Statement">&gt;&amp;</span>  /dev/null
	<span class="Statement">endif</span>
<span class="Statement">endif</span>


<span class="Comment">#--------------</span>
<span class="Comment"># Bin directory</span>
<span class="Comment">#--------------</span>

<span class="Statement">if</span><span class="Statement">(!</span> <span class="Statement">-</span>e <span class="Type">$BINDIR</span><span class="Statement">)</span> <span class="Statement">then</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    ... Creating '</span><span class="Type">$BINDIR</span><span class="Constant">' (PUPS/P3 binaries directory)&quot;</span>								<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

	mkdir <span class="Type">$BINDIR</span>														<span class="Statement">&gt;&amp;</span>  /dev/null
	<span class="Statement">endif</span>
<span class="Statement">endif</span>


<span class="Comment">#------------------</span>
<span class="Comment"># Library directory</span>
<span class="Comment">#------------------</span>

<span class="Statement">if</span><span class="Statement">(!</span> <span class="Statement">-</span>e <span class="Type">$LIBDIR</span><span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ... Creating '</span><span class="Type">$LIBDIR</span><span class="Constant">' (PUPS/P3 library directory)&quot;</span>								<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        mkdir <span class="Type">$LIBDIR</span>														<span class="Statement">&gt;&amp;</span>  /dev/null
	<span class="Statement">endif</span>
<span class="Statement">endif</span>


<span class="Comment">#-----------------</span>
<span class="Comment"># Header directory</span>
<span class="Comment">#-----------------</span>

<span class="Statement">if</span><span class="Statement">(!</span> <span class="Statement">-</span>e <span class="Type">$HDRDIR</span><span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ... Creating '</span><span class="Type">$HDRDIR</span><span class="Constant">' (PUPS/P3 header directory)&quot;</span>								<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        mkdir <span class="Type">$INCDIR</span>														<span class="Statement">&gt;&amp;</span>  /dev/null
       	mkdir <span class="Type">$HDRDIR</span>														<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">endif</span>


<span class="Comment">#------------------------</span>
<span class="Comment"># Top level man directory</span>
<span class="Comment">#------------------------</span>

<span class="Statement">if</span><span class="Statement">(!</span> <span class="Statement">-</span>e <span class="Type">$MANDIR</span><span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ... Creating '</span><span class="Type">$MANDIR</span><span class="Constant">' (PUPS/P3 manual directory)&quot;</span>								<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        mkdir <span class="Type">$MANDIR</span>														<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">endif</span>


<span class="Comment">#-----</span>
<span class="Comment"># Man1</span>
<span class="Comment">#-----</span>

<span class="Statement">if</span><span class="Statement">(!</span> <span class="Statement">-</span>e <span class="Type">$MANDIR</span><span class="Statement">/</span>man1<span class="Statement">)</span> <span class="Statement">then</span>
	mkdir <span class="Type">$MANDIR</span>/man1													<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">endif</span>


<span class="Comment">#-----</span>
<span class="Comment"># Man3</span>
<span class="Comment">#-----</span>

<span class="Statement">if</span><span class="Statement">(!</span> <span class="Statement">-</span>e <span class="Type">$MANDIR</span><span class="Statement">/</span>man3<span class="Statement">)</span> <span class="Statement">then</span>
	mkdir <span class="Type">$MANDIR</span>/man3													<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">endif</span>


<span class="Comment">#-----</span>
<span class="Comment"># Man7</span>
<span class="Comment">#-----</span>

<span class="Statement">if</span><span class="Statement">(!</span> <span class="Statement">-</span>e <span class="Type">$MANDIR</span><span class="Statement">/</span>man7<span class="Statement">)</span> <span class="Statement">then</span>
	mkdir <span class="Type">$MANDIR</span>/man7													<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">endif</span>


<span class="Comment">#--------------------------------------------------------------</span>
<span class="Comment"># If we haven't got .cshrc and/or .tcshrc for this user install</span>
<span class="Comment"># them now</span>
<span class="Comment">#--------------------------------------------------------------</span>

<span class="Statement">if</span><span class="Statement">(!</span> <span class="Statement">-</span>e <span class="Statement">~/</span>.cshrc<span class="Statement">)</span> <span class="Statement">then</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;Setting up P3M environment (for csh)&quot;</span>										<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

	\cp p3m_cshrc ~/.cshrc													<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">endif</span>

<span class="Statement">if</span><span class="Statement">(!</span> <span class="Statement">-</span>e <span class="Statement">~/</span>.tcshrc<span class="Statement">)</span> <span class="Statement">then</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;Setting up P3M environment (for tcsh)&quot;</span>										<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

	\cp p3m_tcshrc ~/.tcshrc												<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">endif</span>

gcc -w -Wfatal-errors -I../include.libs -O3 -o iscard iscard.c									<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsp3:  operation failed [gcc iscard]&quot;</span>								<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

	<span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

gcc -w -Wfatal-errors -I../include.libs -O3 -o ishex ishex.c  									<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsp3: operation failed [gcc ishex]&quot;</span>                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

gcc -w -Wfatal-errors -I../include.libs -O3 -o isint isint.c  									<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR  install_pupsp3: operation failed [gcc isint]&quot;</span>                                              		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

gcc -I../include.libs -DFLOAT -w -Wfatal-errors -O3 -o isfloat isfloat.c  							<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR  install_pupsp3: operation failed [gcc isfloat]&quot;</span>                                             		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

gcc -w -Wfatal-errors -O3 -o tas tas.c -lbsd											<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR  install_pupsp3: operation failed gcc tas]&quot;</span>                                                     	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

gcc -w -Wfatal-errors -I../include.libs -DHAVE_READLINE -O3 -o ask ask.c -lbsd -lreadline -ltermcap				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR  install_pupsp3: operation failed [gcc ask]&quot;</span>                                                  		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

gcc -w -Wfatal-errors -O3 -o add add.c												<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR  install_pupsp3: operation failed [gcc add]&quot;</span>                                  				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

gcc -I../include.libs -DFLOAT -w -Wfatal-errors -O3 -o fadd fadd.c                              				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR  install_pupsp3:  operation failed [gcc fadd]&quot;</span>                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

gcc -w -Wfatal-errors -O3 -o sub sub.c                                                          				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR operation failed [gcc sub]&quot;</span>                                                    				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

gcc -I../include.libs -DFLOAT -w -Wfatal-errors -O3 -o fsub fsub.c                              				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsp3: operation failed gcc fsub]&quot;</span>                                                   		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

gcc -w -Wfatal-errors -O3 -o mul mul.c                                                          				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsp3: operation failed [gcc mul]&quot;</span>                                                   		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

gcc -I../include.libs -DFLOAT -w -Wfatal-errors -O3 -o fmul fmul.c                              				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsp3: operation failed [gcc fmul]&quot;</span>                                                   		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

gcc -w -Wfatal-errors -O3 -o div div.c                                                          				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsp3: operation failed [gcc div]&quot;</span>                                                   		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

gcc -I../include.libs -DFLOAT -w -Wfatal-errors -O3 -o fdiv fdiv.c                              				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsp3: operation failed [gcc fdiv]&quot;</span>                                                  		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

gcc -I../include.libs -DFLOAT -w -Wfatal-errors -O3 -o fint fint.c -lm                          				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsp3: operation failed [gcc fint]&quot;</span>                                                   		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

gcc -I../include.libs -DFLOAT -w -Wfatal-errors -O3 -o intf intf.c                              				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsp3: operation failed [gcc intf]&quot;</span>                                                  		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                 				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

strip tas iscard ishex isint isfloat ask add sub mul div fadd fsub fmul fdiv							<span class="Statement">&gt;&amp;</span>  /dev/null
\mv tas iscard ishex isint isfloat ask add sub mul div fadd fsub fmul fdiv fint intf <span class="Type">$BINDIR</span>					<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                		 			<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsp3: operation failed [install PUPS/P3 build tools&quot;</span>						<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

<span class="Statement">source</span> ~/.cshrc															<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">pushd</span> ..															<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">set</span> <span class="Type">path</span>=($<span class="Type">path</span> . .. <span class="Statement">`pwd`</span>)
<span class="Statement">popd</span>																<span class="Statement">&gt;&amp;</span>  /dev/null

<span class="Statement">if</span><span class="Statement">(-</span>e BUILDLOCK<span class="Statement">)</span> <span class="Statement">then</span>

ask_again:

	<span class="Statement">set</span> ret = <span class="Statement">`ask &quot;    buildlock exists  -- delete?&quot;`</span>									&gt;&amp;  /dev/tty
	<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$ret</span> <span class="Statement">==</span> <span class="Constant">&quot;y&quot;</span> <span class="Statement">||</span> <span class="Type">$ret</span> <span class="Statement">==</span> <span class="Constant">&quot;yes&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>
		\rmdir BUILDLOCK												<span class="Statement">&gt;&amp;</span>  /dev/null
	<span class="Statement">else</span> <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$ret</span> <span class="Statement">==</span> <span class="Constant">&quot;q&quot;</span> <span class="Statement">||</span> <span class="Type">$ret</span> <span class="Statement">==</span> <span class="Constant">&quot;quit&quot;</span> <span class="Statement">||</span> <span class="Type">$ret</span> <span class="Statement">==</span> <span class="Constant">&quot;bye&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>
		\rmdir BUILDLOCK        											<span class="Statement">&gt;&amp;</span>  /dev/null
		<span class="Statement">exit</span> <span class="Constant">255</span>
	<span class="Statement">endif</span>

	<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$ret</span> <span class="Statement">!=</span> <span class="Constant">&quot;yes&quot;</span> <span class="Statement">&amp;&amp;</span> <span class="Type">$ret</span> <span class="Statement">!=</span> <span class="Constant">&quot;y&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>
		<span class="Statement">goto</span> ask_again
	<span class="Statement">endif</span>
<span class="Statement">endif</span>

tas BUILDLOCK															<span class="Statement">&gt;&amp;</span>  /dev/null

<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    ... Building compilation tools (upcase, downcase, prefix, suffix, striplc, error)&quot;</span>					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

gcc -w -Wfatal-errors -I../include.libs  -O3 -o suffix  suffix.c     								<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                              		                                                   	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR operation failed [gcc suffix]&quot;</span>                                                              		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

gcc -w -Wfatal-errors -I../include.libs -O3 -o prefix  prefix.c -lbsd			    					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

gcc -w -Wfatal-errors -O3 -o striplc striplc.c    										<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsp3: operation failed [gcc stripl]&quot;</span>                                                        	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

gcc -w -Wfatal-errors -O3 -o downcase downcase.c  										<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsp3: operation failed [gcc downcase]&quot;</span>                                                       	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

gcc -w -Wfatal-errors -O3 -o upcase upcase.c      										<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsp3: operation failed [gcc upcase]&quot;</span>                                                        	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

gcc -w -Wfatal-errors -O3 -o error error.c      										<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsp3: operation failed [gccc errpr]&quot;</span>                                                         	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>


strip suffix prefix striplc downcase upcase error										<span class="Statement">&gt;&amp;</span>  /dev/null
\mv suffix prefix striplc downcase upcase error <span class="Type">$BINDIR</span> 									<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                		 			<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsp3: operation failed [install PUPS/P3 trivial support tools]&quot;</span>				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

<span class="Statement">rehash</span>

<span class="Statement">set</span> rawtarget = $MACHTYPE.$OSTYPE
<span class="Statement">set</span> target    = $OSTYPE
<span class="Statement">set</span> utarget   = <span class="Statement">`upcase $target`</span>
<span class="Statement">set</span> target    = <span class="Statement">`downcase $target`</span>
<span class="Statement">set</span> arch      = $MACHTYPE
<span class="Statement">set</span> arch      = <span class="Statement">`upcase $arch`</span>

<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    Configuring P3-20 for &quot;</span><span class="Type">$rawtarget</span> <span class="Constant">&quot;host&quot;</span>										<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

<span class="Statement">if</span><span class="Statement">(</span>$<span class="Comment"># == 0) then</span>
	set buildtype = cluster

	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    ... Build identifier is 'cluster' (default)&quot;</span>									<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">else</span> <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$1</span> <span class="Statement">==</span> <span class="Constant">&quot;usage&quot;</span> <span class="Statement">||</span> <span class="Type">$1</span> <span class="Statement">==</span> <span class="Constant">&quot;--usage&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: expecting 'default'&quot;</span>									<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    Usage: install_pupsP3 [usage] | [clean] | [[vanilla | cluster] [tty | logfile] [default]&quot;</span>			<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;                          [default | nodefault] [debug]&quot;</span>								<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">0</span>
<span class="Statement">else</span> <span class="Statement">if</span> <span class="Statement">(</span><span class="Type">$1</span> <span class="Statement">!=</span> <span class="Constant">&quot;vanilla&quot;</span> <span class="Statement">&amp;&amp;</span> <span class="Type">$1</span> <span class="Statement">!=</span> <span class="Constant">&quot;cluster&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: expecting 'default'&quot;</span>									<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    Usage: install_pupsP3 [usage] | [clean] | [[vanilla | cluster]  [tty | logfile] [default]&quot;</span>			<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;                          [default | nodefault] [debug]&quot;</span>								<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>

	\rmdir BUILDLOCK        												<span class="Statement">&gt;&amp;</span>  /dev/null
        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">else</span>
	<span class="Statement">set</span> buildtype = $1

	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    ... Build identifier is '</span><span class="Type">$1</span><span class="Constant">'&quot;</span>											<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">endif</span>

<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>
<span class="Statement">if</span><span class="Statement">(!</span> <span class="Statement">-</span>e pupsuname<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: cannot determine P3 architecture (no [pupsuname] file present)&quot;</span>				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

	\rmdir BUILDLOCK													<span class="Statement">&gt;&amp;</span>  /dev/null
        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

<span class="Statement">if</span><span class="Statement">(!</span> <span class="Statement">-</span>e ..<span class="Statement">/</span>include.libs<span class="Statement">)</span> <span class="Statement">then</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: header file directory [../include.libs] missing&quot;</span>					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

	\rmdir BUILDLOCK													<span class="Statement">&gt;&amp;</span>  /dev/null
	<span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

<span class="Statement">if</span><span class="Statement">(!</span> <span class="Statement">-</span>e <span class="Type">$confdir</span><span class="Statement">)</span> <span class="Statement">then</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: configuration file directory [</span><span class="Type">$confdir</span><span class="Constant">] missing&quot;</span>					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

	\rmdir BUILDLOCK													<span class="Statement">&gt;&amp;</span>  /dev/null
	<span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

<span class="Statement">set</span> crypt = <span class="Constant">&quot;&quot;</span>
<span class="Statement">set</span> crypt = <span class="Constant">&quot;-lcrypt&quot;</span>


<span class="Comment">#--------------------------------</span>
<span class="Comment"># Set to -lss_nis for NIS support</span>
<span class="Comment">#--------------------------------</span>

<span class="Statement">set</span> nis    = <span class="Constant">&quot;&quot;</span>
<span class="Statement">set</span> AUTHEN = <span class="Constant">&quot;-DSHADOW_SUPPORT&quot;</span>

<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    Authentication method support (</span><span class="Type">$AUTHEN</span><span class="Constant">)&quot;</span>										<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    ... Making P3-2023 binary directories for libraries and service functions&quot;</span>						<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

<span class="Statement">set</span> pctarget = $target
<span class="Statement">set</span> mode     = INVALID

<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$buildtype</span> <span class="Statement">==</span> vanilla<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building basic P3/PSRP for standalone host&quot;</span>									<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">set</span> dummy_shgmalloc = need_dummy_shgmalloc
<span class="Statement">endif</span>

<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$buildtype</span> <span class="Statement">==</span> cluster<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    Dynamic link library shared memory, checkpointing  and network support enabled&quot;</span>					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building dynamic P3/PSRP for network clustered MIMD environment&quot;</span>						<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">set</span> pctarget = $target.cluster
   <span class="Statement">set</span> dummy_shgmalloc = none
<span class="Statement">endif</span>

<span class="Statement">pushd</span> ..															<span class="Statement">&gt;&amp;</span>  /dev/null

\rm -rf bin lib															<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(!</span> <span class="Statement">-</span>e lib.<span class="Type">$arch</span>.<span class="Type">$pctarget</span><span class="Statement">)</span> <span class="Statement">then</span>
	mkdir lib.<span class="Type">$arch</span>.<span class="Type">$pctarget</span> 												<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">endif</span>
ln -s lib.<span class="Type">$arch</span>.<span class="Type">$pctarget</span> lib 													<span class="Statement">&gt;&amp;</span>  /dev/null

<span class="Statement">if</span><span class="Statement">(!</span> <span class="Statement">-</span>e bin.<span class="Type">$arch</span>.<span class="Type">$pctarget</span><span class="Statement">)</span> <span class="Statement">then</span>
	mkdir bin.<span class="Type">$arch</span>.<span class="Type">$pctarget</span>												<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">endif</span>
ln -s bin.<span class="Type">$arch</span>.<span class="Type">$pctarget</span> bin													<span class="Statement">&gt;&amp;</span>  /dev/null

<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$buildtype</span> <span class="Statement">!=</span> <span class="Constant">&quot;&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>
   ls -s btype <span class="Type">$buildtype</span>													<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">endif</span>

<span class="Statement">if</span><span class="Statement">(-</span>e lib.<span class="Type">$arch</span>.<span class="Type">$pctarget</span> <span class="Statement">&amp;&amp;</span> <span class="Statement">`ls -l lib.$arch.$pctarget | grep &quot;total 0&quot;`</span> <span class="Statement">==</span> <span class="Constant">&quot;&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>
	\rm -f lib.<span class="Type">$arch</span>.<span class="Type">$pctarget</span>/*												<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">endif</span>

<span class="Statement">if</span><span class="Statement">(-</span>e bin.<span class="Type">$arch</span>.<span class="Type">$pctarget</span> <span class="Statement">&amp;&amp;</span> <span class="Statement">`ls -l bin.$arch.$pctarget | grep &quot;total 0&quot;`</span> <span class="Statement">==</span> <span class="Constant">&quot;&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>
	\rm -f bin.<span class="Type">$arch</span>.<span class="Type">$pctarget</span>/*												<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">endif</span>

<span class="Statement">popd</span>																<span class="Statement">&gt;&amp;</span>  /dev/null


<span class="Comment">#------------------------------------</span>
<span class="Comment"># Are we in secure installation mode?</span>
<span class="Comment">#------------------------------------</span>

<span class="Statement">if</span><span class="Statement">(</span><span class="Statement">`grep &quot;\#-DSECURE&quot; &lt;$confdir/$target.$buildtype`</span> <span class="Statement">!=</span> <span class="Constant">&quot;&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">set</span> install_mode = insecure
<span class="Statement">else</span>
        <span class="Statement">set</span> install_mode = secure
<span class="Statement">endif</span>

<span class="Statement">set</span> method = default
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$install_mode</span> <span class="Statement">==</span> secure<span class="Statement">)</span> <span class="Statement">then</span>

	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    -----------------------------------------------------------------------------------------&quot;</span>			<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    You have specified secure binaries in your configuration file -- so you will need to&quot;</span>				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    specify a licencing method (sdongle or dserial) under </span><span class="Type">$OSTYPE</span><span class="Constant">.&quot;</span>						<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    -----------------------------------------------------------------------------------------&quot;</span>			<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

	<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$securitymode</span> <span class="Statement">==</span> default<span class="Statement">)</span> <span class="Statement">then</span>
		<span class="Statement">set</span> method = sdongle
	<span class="Statement">else</span>

ask_method_again:
        	<span class="Statement">set</span> method = <span class="Statement">`ask &quot;    Licensing method (sdongle or dserial) [default: sdongle]&quot;`</span>

		<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$method</span> <span class="Statement">==</span> <span class="Constant">&quot;bye&quot;</span> <span class="Statement">||</span> <span class="Type">$method</span> <span class="Statement">==</span> <span class="Constant">&quot;quit&quot;</span> <span class="Statement">||</span> <span class="Type">$method</span> <span class="Statement">==</span> <span class="Constant">&quot;q&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>
			\rmdir BUILDLOCK											<span class="Statement">&gt;&amp;</span>  /dev/null
       	         	<span class="Statement">exit</span> <span class="Constant">255</span>
		<span class="Statement">endif</span>

		<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$method</span> <span class="Statement">!=</span> <span class="Constant">&quot;&quot;</span> <span class="Statement">&amp;&amp;</span> <span class="Type">$method</span> <span class="Statement">!=</span> <span class="Constant">&quot;sdongle&quot;</span> <span class="Statement">&amp;&amp;</span> <span class="Type">$method</span> <span class="Statement">!=</span> <span class="Constant">&quot;dserial&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>
			<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>													<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
			<span class="Statement">echo</span> <span class="Constant">&quot;    '</span><span class="Type">$method</span><span class="Constant">' is not a valid licensing method ('sdongle' or 'dserial' expected)&quot;</span>			<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
			<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>													<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

			<span class="Statement">goto</span> ask_method_again
		<span class="Statement">endif</span>
	<span class="Statement">endif</span>

        <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$method</span> <span class="Statement">==</span> dserial<span class="Statement">)</span> <span class="Statement">then</span>
                <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
                <span class="Statement">echo</span> <span class="Constant">&quot;    Licence method is disk serial&quot;</span>									<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
		<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
		<span class="Statement">echo</span> <span class="Constant">&quot;    ... Building hard disk device serial number extraction tool&quot;</span>						<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
		<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
		gcc -w -Wfatal-errors -DLINUX -I../include.libs -O3 -o hdid hdid.c -lbsd					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
		<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        	   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                     			<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        	   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc hdid&quot;</span>                                         		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        	   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                      		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        	   <span class="Statement">exit</span> <span class="Constant">255</span>
		<span class="Statement">endif</span>
		\mv hdid <span class="Type">$BINDIR</span>                										<span class="Statement">&gt;&amp;</span>  /dev/null

               	<span class="Statement">set</span> default_hd_device = <span class="Statement">`df | grep boot | awk '{print $1}' | striplc | sed s/&quot;\/dev\/&quot;//g`</span>
               	<span class="Statement">set</span> hd_device = <span class="Statement">`ask &quot;hd_device [default  $default_hd_device]&quot;`</span>
               	<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$hd_device</span> <span class="Statement">==</span> <span class="Constant">&quot;q&quot;</span> <span class="Statement">||</span> <span class="Type">$hd_device</span> <span class="Statement">==</span> <span class="Constant">&quot;quit&quot;</span> <span class="Statement">||</span> <span class="Type">$hd_device</span> <span class="Statement">==</span> <span class="Constant">&quot;bye&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>
			\rmdir BUILDLOCK	<span class="Statement">&gt;&amp;</span>  /dev/null
	         	<span class="Statement">exit</span> <span class="Constant">255</span>
 	        <span class="Statement">else</span> <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$hd_device</span> <span class="Statement">==</span> <span class="Constant">&quot;&quot;</span> <span class="Statement">||</span> <span class="Type">$hd_device</span> <span class="Statement">==</span> <span class="Constant">&quot;default&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>
              		<span class="Statement">set</span> hd_device = $default_hd_device
                       	<span class="Statement">echo</span> <span class="Constant">&quot;    Hard disk device is&quot;</span> <span class="Type">$hd_device</span> <span class="Constant">&quot;(default)&quot;</span>							<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
               	<span class="Statement">endif</span>

               	<span class="Statement">set</span> seed = <span class="Statement">`ask &quot;    encryption seed [default 9999]&quot;`</span>
               	<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$seed</span> <span class="Statement">==</span> <span class="Constant">&quot;q&quot;</span> <span class="Statement">||</span> <span class="Type">$seed</span> <span class="Statement">==</span> <span class="Constant">&quot;quit&quot;</span> <span class="Statement">||</span> <span class="Type">$seed</span> <span class="Statement">==</span> <span class="Constant">&quot;bye&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>
			\rmdir BUILDLOCK        <span class="Statement">&gt;&amp;</span>  /dev/null
		  	<span class="Statement">exit</span> <span class="Constant">255</span>
               	<span class="Statement">else</span> <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$seed</span> <span class="Statement">==</span> <span class="Constant">&quot;&quot;</span> <span class="Statement">||</span> <span class="Type">$seed</span> <span class="Statement">==</span> <span class="Constant">&quot;default&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>
			<span class="Statement">set</span> seed = 9999
                       	<span class="Statement">echo</span> <span class="Constant">&quot;Encryption seed is&quot;</span> <span class="Type">$seed</span> <span class="Constant">&quot;(default)&quot;</span>								<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
               	<span class="Statement">endif</span>

		<span class="Statement">set</span> dserial = <span class="Statement">`ask &quot;    disk serial [default use build disk serial]&quot;`</span>
                <span class="Statement">if</span><span class="Statement">(</span><span class="Constant">&quot;</span><span class="Type">$dserial</span><span class="Constant">&quot;</span> <span class="Statement">==</span> <span class="Constant">&quot;q&quot;</span> <span class="Statement">||</span> <span class="Constant">&quot;</span><span class="Type">$dserial</span><span class="Constant">&quot;</span> <span class="Statement">==</span> <span class="Constant">&quot;quit&quot;</span> <span class="Statement">||</span> <span class="Constant">&quot;</span><span class="Type">$dserial</span><span class="Constant">&quot;</span> <span class="Statement">==</span> <span class="Constant">&quot;bye&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>
			\rmdir BUILDLOCK	<span class="Statement">&gt;&amp;</span>  /dev/null
                        <span class="Statement">exit</span> <span class="Constant">255</span>
		<span class="Statement">endif</span>

		<span class="Statement">if</span><span class="Statement">(</span><span class="Constant">&quot;</span><span class="Type">$dserial</span><span class="Constant">&quot;</span> <span class="Statement">!=</span> <span class="Constant">&quot;&quot;</span> <span class="Statement">||</span> <span class="Constant">&quot;</span><span class="Type">$dserial</span><span class="Constant">&quot;</span> <span class="Statement">==</span> <span class="Constant">&quot;default&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>
			<span class="Statement">setenv</span> USE_DISK_SERIAL <span class="Constant">&quot;</span><span class="Type">$dserial</span><span class="Constant">&quot;</span>
		<span class="Statement">else</span>
			<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>													<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
                        <span class="Statement">echo</span> <span class="Constant">&quot;    -----------------------------------------------------------------------------------------&quot;</span>	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
                	<span class="Statement">echo</span> <span class="Constant">&quot;    You must change permissions of installation disk device (a+r)&quot;</span>				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
                        <span class="Statement">echo</span> <span class="Constant">&quot;    -----------------------------------------------------------------------------------------&quot;</span>	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
			<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>													<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

get_passwd:
                	<span class="Statement">if</span><span class="Statement">(</span><span class="Statement">`whoami`</span> <span class="Statement">!=</span> root<span class="Statement">)</span> <span class="Statement">then</span>
                        	<span class="Statement">echo</span> <span class="Constant">&quot;    (Root) password: &quot;</span>
                        	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>

                        	<span class="Statement">if</span><span class="Statement">(</span><span class="Statement">`su -c &quot;chmod a+r /dev/$hd_device&quot; |&amp; awk '{print $2}'`</span> <span class="Statement">==</span> incorrect<span class="Statement">)</span> <span class="Statement">then</span>
					<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>
                                	<span class="Statement">echo</span> <span class="Constant">&quot;    not authenticated&quot;</span>
					<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>

					<span class="Statement">goto</span> get_passwd
                	        <span class="Statement">endif</span>
                	<span class="Statement">else</span>
                        	<span class="Statement">echo</span> <span class="Constant">&quot;    authenticated&quot;</span>
                	<span class="Statement">endif</span>
		<span class="Statement">endif</span>

                sed s/WHICH_DEVICE/<span class="Type">$hd_device</span>/g <span class="Statement">&lt;</span>../include.libs/securicor.h  | sed s/SVAL/<span class="Type">$seed</span>/g <span class="Statement">&gt;</span>../include.libs/sed_securicor.h
        <span class="Statement">else</span> <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$method</span> <span class="Statement">==</span> <span class="Constant">&quot;&quot;</span> <span class="Statement">||</span> <span class="Type">$method</span> <span class="Statement">==</span> sdongle <span class="Statement">||</span> <span class="Type">$method</span> <span class="Statement">==</span> default<span class="Statement">)</span> <span class="Statement">then</span>
                <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
                <span class="Statement">echo</span> <span class="Constant">&quot;    Licence method is soft dongle&quot;</span>									<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

                <span class="Statement">set</span> dongle_dir = ~<span class="Statement">`whoami`</span>/.sdongles
		<span class="Statement">if</span><span class="Statement">(!</span> <span class="Statement">-</span>e <span class="Type">$dongle_dir</span><span class="Statement">)</span> <span class="Statement">then</span>
			mkdir <span class="Type">$dongle_dir</span>											<span class="Statement">&gt;&amp;</span>  /dev/null
		<span class="Statement">endif</span>

                <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
                <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building security tools (sdongle)&quot;</span>								<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
                <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

                gcc -w -Wfatal-errors -I../include.libs -O3 -o sdongle sdongle.c  						<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
		<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
		        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        		<span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc sdongle]&quot;</span>                                         <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        		<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        		<span class="Statement">exit</span> <span class="Constant">255</span>
		<span class="Statement">endif</span>
                \mv sdongle <span class="Type">$dongle_dir</span>/sdongle 										<span class="Statement">&gt;&amp;</span>  /dev/null
		<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
		        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        		<span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install sdongle]&quot;</span>                                     <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        		<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

		        <span class="Statement">exit</span> <span class="Constant">255</span>
		<span class="Statement">endif</span>

		<span class="Statement">set</span> is_key = NO
		<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$securitymode</span> <span class="Statement">==</span> default<span class="Statement">)</span> <span class="Statement">then</span>
			<span class="Statement">set</span> dongle_file_name = pups.dongle
		<span class="Statement">else</span>
                	<span class="Statement">set</span> dongle_file_name = <span class="Statement">`ask &quot;    dongle file name (default pups.dongle)&quot;`</span>
                	<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$dongle_file_name</span> <span class="Statement">==</span> <span class="Constant">&quot;q&quot;</span> <span class="Statement">||</span> <span class="Type">$dongle_file_name</span> <span class="Statement">==</span> <span class="Constant">&quot;quit&quot;</span> <span class="Statement">||</span> <span class="Type">$dongle_file_name</span> <span class="Statement">==</span> <span class="Constant">&quot;bye&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>
				\rmdir BUILDLOCK	<span class="Statement">&gt;&amp;</span>  /dev/null
                        	<span class="Statement">exit</span> <span class="Constant">255</span>
                	<span class="Statement">else</span> <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$dongle_file_name</span> <span class="Statement">==</span> <span class="Constant">&quot;&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>
				<span class="Statement">set</span> dongle_file_name = pups.dongle
			<span class="Statement">else</span> <span class="Statement">if</span><span class="Statement">(</span><span class="Statement">`ishex $dongle_file_name | grep TRUE`</span> <span class="Statement">!=</span> <span class="Constant">&quot;&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>
				<span class="Statement">set</span> is_key = YES
                	<span class="Statement">endif</span>
		<span class="Statement">endif</span>

		<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$securitymode</span> <span class="Statement">==</span> default<span class="Statement">)</span> <span class="Statement">then</span>
			<span class="Statement">set</span> seed = 9999
		<span class="Statement">else</span>
                	<span class="Statement">set</span> seed = <span class="Statement">`ask &quot;    encryption seed [default 9999]&quot;`</span>
                	<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$seed</span> <span class="Statement">==</span> <span class="Constant">&quot;q&quot;</span> <span class="Statement">||</span> <span class="Type">$seed</span> <span class="Statement">==</span> <span class="Constant">&quot;quit&quot;</span> <span class="Statement">||</span> <span class="Type">$seed</span> <span class="Statement">==</span> <span class="Constant">&quot;bye&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>
				\rmdir BUILDLOCK	<span class="Statement">&gt;&amp;</span>  /dev/null
                        	<span class="Statement">exit</span> <span class="Constant">255</span>
			<span class="Statement">endif</span>

	                <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$seed</span> <span class="Statement">==</span> <span class="Constant">&quot;&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>
				<span class="Statement">set</span> seed = 9999
                        	<span class="Statement">echo</span> <span class="Constant">&quot;    Encryption seed is&quot;</span> <span class="Type">$seed</span> <span class="Constant">&quot;(default)&quot;</span>							<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
			<span class="Statement">endif</span>
                <span class="Statement">endif</span>

		<span class="Statement">pushd</span> <span class="Type">$dongle_dir</span>												<span class="Statement">&gt;&amp;</span>  /dev/null
		<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
		<span class="Statement">echo</span> <span class="Constant">&quot;    Creating dongle file in  </span><span class="Statement">`pwd`</span><span class="Constant">&quot;</span>									<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
		<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
                \rm pups.dongle		<span class="Statement">&gt;&amp;</span>  /dev/null

		<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$is_key</span> <span class="Statement">==</span> <span class="Constant">&quot;NO&quot;</span><span class="Statement">)</span> <span class="Statement">then</span>
                	sdongle  pups.dongle	<span class="Statement">&gt;&amp;</span>  /dev/null
                	<span class="Statement">setenv</span> USE_SOFT_DONGLE <span class="Type">$dongle_dir</span>/pups.dongle
			<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>													<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
                        <span class="Statement">echo</span> <span class="Constant">&quot;    -----------------------------------------------------------------------------------------&quot;</span>	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
                	<span class="Statement">echo</span> <span class="Constant">&quot;    You need to setenv USE_SOFT_DONGLE </span><span class="Type">$dongle_dir</span><span class="Constant">/pups.dongle&quot;</span> 					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
                        <span class="Statement">echo</span> <span class="Constant">&quot;    -----------------------------------------------------------------------------------------&quot;</span>	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
			<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>
		<span class="Statement">else</span>
			<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>													<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
                        <span class="Statement">echo</span> <span class="Constant">&quot;    -----------------------------------------------------------------------------------------&quot;</span>	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
                	<span class="Statement">echo</span> <span class="Constant">&quot;    You need to setenv USE_SOFT_DONGLE appopriately (on host holding dongle)&quot;</span> 			<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
                        <span class="Statement">echo</span> <span class="Constant">&quot;    -----------------------------------------------------------------------------------------&quot;</span>	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
			<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>													<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
		<span class="Statement">endif</span>

		chmod a+r *dongle*												<span class="Statement">&gt;&amp;</span>  /dev/null
		<span class="Statement">popd</span> 														<span class="Statement">&gt;&amp;</span>  /dev/null

                sleep <span class="Constant">1</span>
                sed s/WHICH_DEVICE/dummy/g <span class="Statement">&lt;</span>../include.libs/securicor.h | sed s/SVAL/<span class="Type">$seed</span>/g <span class="Statement">&gt;</span>../include.libs/sed_securicor.h
        <span class="Statement">endif</span>
<span class="Statement">endif</span>

<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    ... Building (enigma) encrypting tool (ecrypt)&quot;</span>									<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
gcc -w -Wfatal-errors -I../include.libs -O3 -o ecrypt ecrypt.c									<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc ecrypt]&quot;</span>                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

strip ecrypt
\mv ecrypt <span class="Type">$BINDIR</span> 														<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>    		                                                                               			<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install ecrypt]&quot;</span>                                             		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>


<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    ... Compiling P3-2023 configure and binary time stamping utilities&quot;</span>							<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

<span class="Statement">set</span> target = <span class="Statement">`upcase $target`</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$install_mode</span> <span class="Statement">==</span> secure<span class="Statement">)</span> <span class="Statement">then</span>
	gcc -w -Wfatal-errors -DDEFAULT_CONFIGDIR=<span class="Type">$projectPath</span> -DSECURE -I../include.libs -D<span class="Type">$target</span> \
								     -O3 -o pupsconf pupsconf.c -lbsd				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">else</span>
	gcc -w -Wfatal-errors -DDEFAULT_CONFIGDIR=<span class="Type">$projectPath</span> -I../include.libs -D<span class="Type">$target</span>          \
							             -O3 -o pupsconf pupsconf.c -lbsd			  	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">endif</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                         		                                                                        <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc pupsconf]&quot;</span>       		                                        <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                        			                                        <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

\rm <span class="Type">$BINDIR</span>/configure														<span class="Statement">&gt;&amp;</span>  /dev/null
sed <span class="Constant">&quot;s|CONFIG_PATH|</span><span class="Type">$PROJECTDIR</span><span class="Constant">|g; s|INC_PATH|</span><span class="Type">$INCDIR</span><span class="Constant">|g&quot;</span> <span class="Statement">&lt;</span>configure.in <span class="Statement">&gt;</span>$$
\mv $$ configure														<span class="Statement">&gt;&amp;</span>  /dev/null

strip pupsconf															<span class="Statement">&gt;&amp;</span>  /dev/null
\mv pupsconf <span class="Type">$BINDIR</span> 														<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                         		                                                                        <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install pupsconf]&quot;</span>                                                    <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                        			                                        <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

gcc -w -Wfatal-errors -D<span class="Type">$target</span> -I../include.libs -O3 -o vstamp vstamp.c							<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR  install_pupsP3: operation failed [gcc vstamp]&quot;</span>                                                		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

strip vstamp															<span class="Statement">&gt;&amp;</span>  /dev/null
\mv vstamp <span class="Type">$BINDIR</span> 														<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR  install_pupsP3: operation failed [install vstamp]&quot;</span>                                                     <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

gcc -w -Wfatal-errors -D<span class="Type">$target</span> -I../include.libs -O3 -o vtagup vtagup.c  							<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR  install_pupsP3: operation failed [gcc vtagup]&quot;</span>                                                              <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

strip vtagup															<span class="Statement">&gt;&amp;</span>  /dev/null
\mv vtagup <span class="Type">$BINDIR</span> 														<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR  install_pupsP3: operation failed [install vtagup]&quot;</span>                                               	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$build_ckpt</span> <span class="Statement">==</span> TRUE<span class="Statement">)</span> <span class="Statement">then</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    ... Set version number for state save (Criu) checkpoints&quot;</span>                                                     <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	vtagup SSAVETAG utilib.c                                                                                                <span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">endif</span>

<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3 Dynamic C [D] to ANSI C translator (language level support for dynamic functions and threads)&quot;</span>	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
gcc -w -Wfatal-errors -I. -I../include.libs -D<span class="Type">$target</span> -D<span class="Type">$arch</span>  -O3 -o pc2c pc2c.c -lbsd						<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR  install_pupsP3: operation failed [gcc pc2c]&quot;</span>                                                  		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

strip pc2c
\mv pc2c <span class="Type">$BINDIR</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install pc2c]&quot;</span>                                                        <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>


<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3 skeleton application generator (generates P3 application source frameworks)&quot;</span>				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

gcc  -w -Wfatal-errors -DDEFAULT_CONFIGDIR=<span class="Type">$projectPath</span> -I. -I../include.libs -D<span class="Type">$target</span> -D<span class="Type">$arch</span> \
								     -O3 -o appgen appgen.c -lbsd				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc appgen]&quot;</span>                                                          <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

strip appgen 															<span class="Statement">&gt;&amp;</span>  /dev/null
\mv appgen <span class="Type">$BINDIR</span> 														<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install appgen]&quot;</span>                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>


<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3 skeleton library generator (generates P3 library source frameworks)&quot;</span>					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

gcc  -w -Wfatal-errors -DDEFAULT_CONFIGDIR=<span class="Type">$projectPath</span> -I. -I../include.libs -D<span class="Type">$target</span> \
						     -O3 -D<span class="Type">$arch</span> -o libgen libgen.c -lbsd					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc libgen]&quot;</span>                                                      	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

strip libgen															<span class="Statement">&gt;&amp;</span>  /dev/null
\mv libgen <span class="Type">$BINDIR</span> 														<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install libgen]&quot;</span>                                                     	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>


<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3 skeleton application DLL generator (generates P3 DLL source frameworks)&quot;</span>				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>

gcc  -w -Wfatal-errors -DDEFAULT_CONFIGDIR=<span class="Type">$projectPath</span> -I. -I../include.libs -D<span class="Type">$target</span> -D<span class="Type">$arch</span> \
								     -O3 -o dllgen dllgen.c -lbsd				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc dllgen]&quot;</span>                                                		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

strip dllgen 															<span class="Statement">&gt;&amp;</span>  /dev/null
\mv dllgen <span class="Type">$BINDIR</span> 														<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install dllgen]&quot;</span>                                            		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>


sed s/\<span class="Type">$ARCH</span>/<span class="Type">$arch</span>/g <span class="Statement">&lt;</span><span class="Type">$confdir</span>/<span class="Type">$pctarget</span> <span class="Statement">&gt;</span><span class="Type">$confdir</span>/<span class="Type">$arch</span>.<span class="Type">$pctarget</span>

<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$buildtype</span> <span class="Statement">==</span> cluster<span class="Statement">)</span> <span class="Statement">then</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3 dynamic bubble memory allocation library&quot;</span>								<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

    <span class="Type">$BINDIR</span>/pupsconf <span class="Type">$arch</span>.<span class="Type">$pctarget</span> Make_bubble.in Makefile									<span class="Statement">&gt;&amp;</span>  /dev/null
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [generate bubble Makefile]&quot;</span>                                  		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

    	<span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>

    make -j<span class="Type">$nCores</span> 														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [make bubble memory allocator]&quot;</span>                               		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>

    make cleanall 														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">endif</span>

<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$buildtype</span> <span class="Statement">==</span> cluster<span class="Statement">)</span> <span class="Statement">then</span>

    <span class="Statement">echo</span> <span class="Constant">&quot;    Network support enabled (Building P3/PSRP for hetrogenous network MIMD environment)&quot;</span>				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span> 															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3 HUP to </span><span class="Special">TERM</span><span class="Constant"> signal relay (relays HUP as </span><span class="Special">TERM</span><span class="Constant"> to payload process)&quot;</span>					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    gcc -w -Wfatal-errors -D<span class="Type">$utarget</span> -D<span class="Type">$arch</span> -O3 -I../include.libs -o hupter hupter.c						<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc hupter]&quot;</span>                                                          <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>
    strip hupter														<span class="Statement">&gt;&amp;</span>  /dev/null

    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3 network signal distributor [nkill] (sends signals to PID or process name on [remote] host)&quot;</span>	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>

    gcc -w -Wfatal-errors -D<span class="Type">$utarget</span> -D<span class="Type">$arch</span> <span class="Type">$AUTHEN</span> -DSSH_SUPPORT -DHAVE_PROC_FS -O3 -I.        \
					      -I../include.libs -o nkill nkill.c <span class="Type">$crypt</span> <span class="Type">$nis</span> -lbsd  				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc nkill]&quot;</span>                                                           <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>
    strip nkill															<span class="Statement">&gt;&amp;</span>  /dev/null

    <span class="Statement">set</span> target = <span class="Statement">`downcase $target`</span>

    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3 text file stripper [stripper] (strips comments from files in VDM's)&quot;</span>				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    gcc -w -Wfatal-errors -D<span class="Type">$utarget</span> -D<span class="Type">$arch</span> -O3 -I../include.libs -o stripper stripper.c 					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc stripper]&quot;</span>                                                        <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>
    strip stripper														<span class="Statement">&gt;&amp;</span>  /dev/null

    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building p3f (checks if process is P3 aware)&quot;</span>									<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

    gcc -w -Wfatal-errors -D<span class="Type">$utarget</span> -D<span class="Type">$arch</span> -DSSH_SUPPORT -DHAVE_PROC_FS -O3 -I.    \
				     -I../include.libs -o p3f p3f.c <span class="Type">$crypt</span> <span class="Type">$nis</span>  -lbsd 						<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc p3f]&quot;</span>                                                             <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

	<span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>

    strip p3f					   	 									<span class="Statement">&gt;&amp;</span>  /dev/null

    <span class="Statement">set</span> target = <span class="Statement">`downcase $target`</span>

    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3 lightweight file homeostat [lyosome] (protects a file for specified time period)&quot;</span>			<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    gcc -w -Wfatal-errors -D<span class="Type">$utarget</span> -D<span class="Type">$arch</span> -O3 -I../include.libs -o lyosome lyosome.c	-lbsd					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc lyosome]&quot;</span>                                                         <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>
    strip lyosome														<span class="Statement">&gt;&amp;</span>  /dev/null

    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3 lightweight garbage collector [kepher] (removes stale temporary files)&quot;</span>				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    gcc -w -Wfatal-errors -D<span class="Type">$utarget</span> -D<span class="Type">$arch</span> -O3 -I../include.libs -o kepher kepher.c -lbsd					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc kepher]&quot;</span>                                                          <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>
    strip kepher                      												<span class="Statement">&gt;&amp;</span>  /dev/null

    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3 sub-pathname extractor [leaf] (extracts apical twigs from pathname branches)&quot;</span>			<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    gcc -w -Wfatal-errors -D<span class="Type">$utarget</span> -D<span class="Type">$arch</span> -O3 -I../include.libs -o leaf leaf.c -lbsd			     			<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc leaf]&quot;</span>                                                            <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>
    strip leaf                        												<span class="Statement">&gt;&amp;</span>  /dev/null

    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3 basal-path extractor [branch] (extracts basal path from pathname branches)&quot;</span>			<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    gcc -w -Wfatal-errors -D<span class="Type">$utarget</span> -D<span class="Type">$arch</span> -O3 -I../include.libs -o branch branch.c -lbsd		   			<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc branch]&quot;</span>                                                          <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>
    strip branch                       												<span class="Statement">&gt;&amp;</span>  /dev/null


    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building psrptool (starts psrp client process in new [vte] window)&quot;</span>						<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    gcc -w -Wfatal-errors -D<span class="Type">$utarget</span> -D<span class="Type">$arch</span> -O3 -I../include.libs -o psrptool psrptool.c -lbsd			 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed gcc psrptool]&quot;</span>                                                         <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>
    strip psrptool														<span class="Statement">&gt;&amp;</span>  /dev/null

    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building servertool (starts psrp server process in new [xterm] window)&quot;</span>					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    gcc -w -Wfatal-errors -D<span class="Type">$utarget</span> -D<span class="Type">$arch</span> -O3 -I../include.libs -o servertool servertool.c -lbsd				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc servertool]&quot;</span>                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>
    strip servertool														<span class="Statement">&gt;&amp;</span>  /dev/null

    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3 farm (permits definition of network-wide [homogenous] process farms)&quot;</span>			        <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    gcc -w -Wfatal-errors -D<span class="Type">$utarget</span> -D<span class="Type">$arch</span> -DSSH_SUPPORT -O3 -I../include.libs -o farm farm.c <span class="Type">$crypt</span> -lbsd			<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc farm]&quot;</span>                                                            <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>
    strip farm	   													        <span class="Statement">&gt;&amp;</span>  /dev/null

    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                     <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building htype (tests if Linux instance is running in container or on regular host)&quot;</span>                          <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                     <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    gcc -w -Wfatal-errors -O3 -o htype htype.c                                                                                  <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc htype]&quot;</span>                                                           <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>
    strip htype 														<span class="Statement">&gt;&amp;</span>  /dev/null

    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$build_ckpt</span> <span class="Statement">==</span> TRUE<span class="Statement">)</span> <span class="Statement">then</span>
       <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                  <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
       <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building ssave (saves process state via Criu)&quot;</span>						                <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
       <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                  <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
       vtagup SSAVETAG ssave.c													<span class="Statement">&gt;&amp;</span>  /dev/null
       gcc -w -Wfatal-errors -O3 -o ssave ssave.c -lbsd										<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
       <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
          <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                               <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
          <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc ssave]&quot;</span>                                                         <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
          <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                               <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

          <span class="Statement">exit</span> <span class="Constant">255</span>
       <span class="Statement">endif</span>
       strip ssave

       <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                  <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
       <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building restart (restarted Criu checkpoints)&quot;</span>						                <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
       <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                  <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
       vtagup SSAVETAG restart.c												<span class="Statement">&gt;&amp;</span>  /dev/null
       gcc -w -Wfatal-errors -O3 -o restart restart.c -lbsd									<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
       <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
          <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                               <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
          <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc restart]&quot;</span>                                                       <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
          <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                               <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

          <span class="Statement">exit</span> <span class="Constant">255</span>
       <span class="Statement">endif</span>
       strip restart
    <span class="Statement">endif</span>

    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building cpuload (monitors server cpu loading)&quot;</span>								<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    gcc -w -Wfatal-errors -D<span class="Type">$utarget</span> -D<span class="Type">$arch</span> -DSSH_SUPPORT -O3 -I../include.libs -o cpuload cpuload.c -lbsd		 	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc cpuload]&quot;</span>                                                         <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>
    strip cpuload														<span class="Statement">&gt;&amp;</span>  /dev/null

    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building lol (detects whether owner of a lid associated with a simple link lock is alive)&quot;</span>			<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    gcc -w -Wfatal-errors -D<span class="Type">$utarget</span> -D<span class="Type">$arch</span> -DSSH_SUPPORT -O3 -I../include.libs -o lol lol.c -lbsd		 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc lol]&quot;</span>                                                             <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>
    strip lol															<span class="Statement">&gt;&amp;</span>  /dev/null

    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building gob (provides named gobhole FIFO allowing asynchronous data transfer to pipeline)&quot;</span>			<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    gcc -w -Wfatal-errors -D<span class="Type">$utarget</span> -D<span class="Type">$arch</span> -DSSH_SUPPORT -O3 -I../include.libs -o gob gob.c -lbsd		 		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc gob]&quot;</span>                                                             <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>
    strip gob															<span class="Statement">&gt;&amp;</span>  /dev/null

    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building arse (provides named arse hole FIFO allowing asynchronous data transfer from pipeline)&quot;</span>		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    gcc -w -Wfatal-errors -D<span class="Type">$utarget</span> -D<span class="Type">$arch</span> -DSSH_SUPPORT -O3 -I../include.libs -o arse arse.c -lbsd				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc arse]&quot;</span>                                                            <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

    	<span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>
    strip arse															<span class="Statement">&gt;&amp;</span>  /dev/null

    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3 tty device homeostat [mktty] (restores /dev/tty if it is deleted)&quot;</span>				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    gcc -w -Wfatal-errors -D<span class="Type">$utarget</span> -D<span class="Type">$arch</span> -DSSH_SUPPORT -O3 -I../include.libs -o mktty mktty.c  				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed gcc mktty]&quot;</span>                                                            <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>
    strip mktty															<span class="Statement">&gt;&amp;</span>  /dev/null

    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3 file creator [mkfile] (creates arbitrary files)&quot;</span>							<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    gcc -w -Wfatal-errors -D<span class="Type">$utarget</span> -D<span class="Type">$arch</span> -O3 -I../include.libs -o mkfile mkfile.c						<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [mklfile]&quot;</span>                                                             <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>
    strip mkfile														<span class="Statement">&gt;&amp;</span>  /dev/null

    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$dummy_shgmalloc</span> <span class="Statement">==</span> need_dummy_shgmalloc<span class="Statement">)</span> <span class="Statement">then</span>
       <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
       <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building dummy persistent heap library (needed to keep make happy)&quot;</span>					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
       <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
       gcc -w -Wfatal-errors -c dummy_phgmalloc.c										<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
       <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
          <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                               <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
          <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc dummy_phgmalloc]&quot;</span>                                               <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
          <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                               <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

          <span class="Statement">exit</span> <span class="Constant">255</span>
       <span class="Statement">endif</span>

       \mv dummy_shgmalloc.o <span class="Type">$LIBDIR</span>/shgmalloc.o										<span class="Statement">&gt;&amp;</span>  /dev/null
       <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
          <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                               <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
          <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install dummy_shgmalloc]&quot;</span>                                           <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
          <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                               <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

          <span class="Statement">exit</span> <span class="Constant">255</span>
       <span class="Statement">endif</span>
    <span class="Statement">endif</span>

    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building gethostip (gets I.P. address information for DHCP clients)&quot;</span>						<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    gcc -w -Wfatal-errors -I. -I../include.libs -D<span class="Type">$target</span> -O3 -o gethostip gethostip.c -lbsd					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc gethostip]&quot;</span>							<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

	<span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>
    strip gethostip														<span class="Statement">&gt;&amp;</span>  /dev/null

    \mv gethostip hupter nkill htype farm cpuload lol gob arse mktty mkfile lyosome kepher leaf branch psrptool servertool p3f stripper     \
															<span class="Type">$BINDIR</span>	<span class="Statement">&gt;&amp;</span>  /dev/null

    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install PUPS/P3 support tools]&quot;</span>                                       <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>

    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$build_ckpt</span> <span class="Statement">==</span> TRUE<span class="Statement">)</span> <span class="Statement">then</span>
        \mv ssave restart <span class="Type">$BINDIR</span>												<span class="Statement">&gt;&amp;</span>  /dev/null

        <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
           <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                              <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
           <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install PUPS/P3 checkpoint support tools]&quot;</span>                         <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
           <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                              <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

           <span class="Statement">exit</span> <span class="Constant">255</span>
        <span class="Statement">endif</span>
    <span class="Statement">endif</span>
<span class="Statement">else</span>

    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3 HUP to </span><span class="Special">TERM</span><span class="Constant"> signal relay (relays HUP as </span><span class="Special">TERM</span><span class="Constant"> to payload process)&quot;</span>					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    gcc -w -Wfatal-errors -D<span class="Type">$utarget</span> -D<span class="Type">$arch</span> -O3 -I../include.libs -o hupter hupter.c						<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc hupter]&quot;</span>                                                          <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>
    strip hupter														<span class="Statement">&gt;&amp;</span>  /dev/null

    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3 network signal distributor [nkill] (sends signals to PID or process name on [remote] host)&quot;</span>	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    gcc -w -Wfatal-errors -D<span class="Type">$utarget</span> -D<span class="Type">$arch</span> -O3 -I../include.libs -o nkill nkill.c <span class="Type">$crypt</span>  					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc nkill]&quot;</span>                                                           <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>
    strip nkill															<span class="Statement">&gt;&amp;</span>  /dev/null

    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3 text file stripper [nkill] (strips comments from files in VDM's)&quot;</span>					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    gcc -w -Wfatal-errors -D<span class="Type">$utarget</span> -D<span class="Type">$arch</span> -O3 -I../include.libs -o stripper stripper.c  					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc stripper]&quot;</span>                                                        <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>
    strip stripper														<span class="Statement">&gt;&amp;</span>  /dev/null

    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3 tty device homeostat [mktty] (restores /dev/tty if it is deleted)&quot;</span>				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    gcc -w -Wfatal-errors -D<span class="Type">$utarget</span> -D<span class="Type">$arch</span> -O3 -I../include.libs -o mktty mktty.c  <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc mktty]&quot;</span>                                                           <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>
    strip mktty															<span class="Statement">&gt;&amp;</span>  /dev/null

    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3 file creator [mkfile] (creates arbitrary files)&quot;</span>							<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    gcc -w -Wfatal-errors -D<span class="Type">$utarget</span> -D<span class="Type">$arch</span> -O3 -I../include.libs -o mkfile mkfile.c  <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc mkfile]&quot;</span>                                                          <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>
    strip mkfile														<span class="Statement">&gt;&amp;</span>  /dev/null

    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3 lightweight file homeostat [lyosome] (protects a file for specified time period)&quot;</span>			<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    gcc -w -Wfatal-errors -D<span class="Type">$utarget</span> -D<span class="Type">$arch</span> -O3 -I../include.libs -o lyosome lyosome.c	-lbsd					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc lyosome]&quot;</span>                                                         <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>

    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3 lightweight garbage collector [kepher] (removes stale temporary files)&quot;</span>				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    gcc -w -Wfatal-errors -D<span class="Type">$utarget</span> -D<span class="Type">$arch</span> -O3 -I../include.libs -o kepher kepher.c						<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc kepher]&quot;</span>                                                          <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>
    strip kepher                      												<span class="Statement">&gt;&amp;</span>  /dev/null

    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3 sub-path extractor [leaf] (extracts twigs from pathname branches)&quot;</span>				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    gcc -w -Wfatal-errors -D<span class="Type">$utarget</span> -D<span class="Type">$arch</span> -O3 -I../include.libs -o leaf leaf.c   						<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc leaf]&quot;</span>                                                            <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>
    strip leaf                        												<span class="Statement">&gt;&amp;</span>  /dev/null

    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building psrptool (starts psrp client process in new [xterm] window)&quot;</span>						<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    gcc -w -Wfatal-errors -D<span class="Type">$utarget</span> -D<span class="Type">$arch</span> -O3 -I../include.libs -o psrptool psrptool.c  					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc psrptool]&quot;</span>                                                        <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>
    strip psrptool														<span class="Statement">&gt;&amp;</span>  /dev/null

    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3 farm (permits definition of network-wide [homogenous] process farms)&quot;</span>			        <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    gcc -w -Wfatal-errors -D<span class="Type">$utarget</span> -D<span class="Type">$arch</span> -O3 -I../include.libs -o farm farm.c <span class="Type">$crypt</span> -lbsd			  		<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR  install_pupsP3: operation failed [gcc farm]&quot;</span>                                                           <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>

    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                     <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building htype (tests if Linux instance is running in container or on regular host)&quot;</span>                          <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                     <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    gcc -w -Wfatal-errors -O3 -o htype htype.c                                                                                  <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc htype]&quot;</span>                                                           <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>
    strip htype															<span class="Statement">&gt;&amp;</span>  /dev/null

    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$build_ckpt</span> <span class="Statement">==</span> TRUE<span class="Statement">)</span> <span class="Statement">then</span>
       <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                  <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
       <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building ssave (saves process state via Criu)&quot;</span>                                                             <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
       <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                  <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
       vtagup SSAVETAG ssave.c													<span class="Statement">&gt;&amp;</span>  /dev/null
       gcc -w -Wfatal-errors -o ssave ssave.c                                                                                   <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
       <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
          <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                               <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
          <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3:  operation failed [gcc ssave]&quot;</span>                                                        <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
          <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                               <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

          <span class="Statement">exit</span> <span class="Constant">255</span>
       <span class="Statement">endif</span>
       strip ssave

       <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                  <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
       <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building restart (restarted Criu checkpoints)&quot;</span>                                                             <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
       <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                  <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
       vtagup SSAVETAG restart.c												<span class="Statement">&gt;&amp;</span>  /dev/null
       gcc -w -Wfatal-errors -O3 -o restart restart.c                                                                           <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
       <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
          <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                               <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
          <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc restart]&quot;</span>                                                       <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
          <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                               <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

          <span class="Statement">exit</span> <span class="Constant">255</span>
       <span class="Statement">endif</span>
       strip restart
    <span class="Statement">endif</span>

    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ... Building lol (detects whether owner of a lid associated with a simple link lock is alive)&quot;</span>			<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    gcc -w -Wfatal-errors -D<span class="Type">$utarget</span> -D<span class="Type">$arch</span> -DSSH_SUPPORT -O3 -I../include.libs -o lol lol.c  					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc lol]&quot;</span>                                                             <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                 <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

        <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>
    strip lol															<span class="Statement">&gt;&amp;</span>  /dev/null

    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$dummy_phgmalloc</span> <span class="Statement">==</span> need_dummy_phgmalloc<span class="Statement">)</span> <span class="Statement">then</span>
       <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
       <span class="Statement">echo</span> <span class="Constant">&quot;... Building dummy persistent heap library (needed to keep make happy)&quot;</span>						<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
       <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
       gcc -w -Wfatal-errors -c dummy_phgmalloc.c										<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
       <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
          <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                               <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
          <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc dummy_phgmalloc]&quot;</span>                                               <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
          <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                               <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

          <span class="Statement">exit</span> <span class="Constant">255</span>
       <span class="Statement">endif</span>

       \mv dummy_shgmalloc.o <span class="Type">$LIBDIR</span>/shgmalloc.o										<span class="Statement">&gt;&amp;</span>  /dev/null
       <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
          <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                               <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
          <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install dummy_phgmalloc]&quot;</span>                                           <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
          <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                               <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

          <span class="Statement">exit</span> <span class="Constant">255</span>
       <span class="Statement">endif</span>
    <span class="Statement">endif</span>

    \mv hupter nkill mktty mkfile htype farm lol lyosome kepher leaf psrptool servertool stripper <span class="Type">$BINDIR</span> 			<span class="Statement">&gt;&amp;</span>  /dev/null
    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
       <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                  <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
       <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install PUPS/P3 support tools]&quot;</span>                                        <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
       <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                  <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

       <span class="Statement">exit</span> <span class="Constant">255</span>
    <span class="Statement">endif</span>

    <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$build_ckpt</span> <span class="Statement">==</span> TRUE<span class="Statement">)</span> <span class="Statement">then</span>
    	\mv ssave restart <span class="Type">$BINDIR</span>												<span class="Statement">&gt;&amp;</span>  /dev/null

    	<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
	   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                              <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
           <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install PUPS/P3 checkpoint support tools]&quot;</span>                         <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
           <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                              <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

           <span class="Statement">exit</span> <span class="Constant">255</span>
        <span class="Statement">endif</span>
    <span class="Statement">endif</span>
<span class="Statement">endif</span>

<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    ... Building catfiles (appends two files preserving inode of first)&quot;</span>							<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
gcc -w -Wfatal-errors -I. -I../include.libs -D<span class="Type">$utarget</span> -D<span class="Type">$arch</span> -O3 -o catfiles catfiles.c  					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [gcc catfiles]&quot;</span>                                                             <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

strip catfiles															<span class="Statement">&gt;&amp;</span>  /dev/null
\mv catfiles <span class="Type">$BINDIR</span> 														<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install catfiles]&quot;</span>                                                         <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>


<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    ... Building new_session (creates new session)&quot;</span>									<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
gcc -w -Wfatal-errors -D<span class="Type">$utarget</span> -D<span class="Type">$arch</span> -I. -O3 -o new_session new_session.c							<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed gcc new_session]&quot;</span>                                                           <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

strip new_session 														<span class="Statement">&gt;&amp;</span>  /dev/null
\mv new_session <span class="Type">$BINDIR</span> 													<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install new_session]&quot;</span>                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$buildtype</span> <span class="Statement">==</span> cluster<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ... Making persistent heap library&quot;</span>										<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Type">$BINDIR</span>/pupsconf <span class="Type">$arch</span>.<span class="Type">$pctarget</span> Make_phmalloc.in Makefile									<span class="Statement">&gt;&amp;</span>  /dev/null
   <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
      <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                   <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
      <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [configure phmalloc]&quot;</span>                                                    <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
      <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                   <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

      <span class="Statement">exit</span> <span class="Constant">255</span>
   <span class="Statement">endif</span>

   make -j<span class="Type">$nCores</span> 														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
      <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                   <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
      <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed make phmalloc]&quot;</span>                                                          <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
      <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                   <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

      <span class="Statement">exit</span> <span class="Constant">255</span>
   <span class="Statement">endif</span>

   make clean															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">endif</span>

<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                         <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    ... Making nobubble compatability library&quot;</span>                                                                            <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                         <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Type">$BINDIR</span>/pupsconf <span class="Type">$arch</span>.<span class="Type">$pctarget</span> Make_nobubble.in Makefile                                                                      <span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [configure nobubble]&quot;</span>                                                       <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

make -j<span class="Type">$nCores</span>                                                                                                                  <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [make nobubble]&quot;</span>                                                            <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    ... Making P3-2023 libraries&quot;</span>												<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Type">$BINDIR</span>/pupsconf <span class="Type">$arch</span>.<span class="Type">$pctarget</span> Make_libs.in Makefile										<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [configure PUpS/P3 libraries]&quot;</span>                                              <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

make -j<span class="Type">$nCores</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [make PUPS/P3 libaries]&quot;</span>                                                    <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>


<span class="Comment">#-----------------------------------</span>
<span class="Comment"># Build PUPS/P3 service applications</span>
<span class="Comment">#-----------------------------------</span>

<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    ... Making P3-2023 service applications&quot;</span>										<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>


<span class="Comment">#------------------------</span>
<span class="Comment"># Build psrp client shell </span>
<span class="Comment">#------------------------</span>

<span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3-2023 interaction client (allows user to manipulate arbitrary processes)&quot;</span>				<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>

<span class="Type">$BINDIR</span>/pupsconf <span class="Type">$arch</span>.<span class="Type">$pctarget</span> Make_psrp.in Makefile										<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [configure psrp client]&quot;</span>                                                    <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

make -j<span class="Type">$nCores</span>   														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [make psrp client]&quot;</span>                                                         <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$debug</span> <span class="Statement">==</span> TRUE<span class="Statement">)</span> <span class="Statement">then</span>
	make unstripped  													<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">else</span>
	make install														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">endif</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install psrp client]&quot;</span>                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

make cleanall   														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>


<span class="Comment">#----------------------------------------</span>
<span class="Comment"># Build maggot (stale resource recylcler) </span>
<span class="Comment">#----------------------------------------</span>

<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3-2023 maggot (removes stale PSRP resources from system)&quot;</span>						<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Type">$BINDIR</span>/pupsconf <span class="Type">$arch</span>.<span class="Type">$pctarget</span> Make_maggot.in Makefile									<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [configure maggot]&quot;</span>                                                         <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

make -j<span class="Type">$nCores</span>     														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [make maggot]&quot;</span>                                                              <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$debug</span> <span class="Statement">==</span> TRUE<span class="Statement">)</span> <span class="Statement">then</span>
	make unstripped  													<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">else</span>
	make install														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">endif</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install maggot]&quot;</span>                                                           <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

make cleanall  															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>


<span class="Comment">#----------------------------------------------</span>
<span class="Comment"># Build embryo (uncommitted dynamic application </span>
<span class="Comment">#----------------------------------------------</span>

<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    ... Building embryo application (an unassigned dynamically programmable server)&quot;</span>					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

<span class="Type">$BINDIR</span>/pupsconf <span class="Type">$arch</span>.<span class="Type">$pctarget</span> Make_embryo.in Makefile									<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [configure embryo]&quot;</span>                                                         <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

make -j<span class="Type">$nCores</span>    														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [make embryo]&quot;</span>                                                              <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$debug</span> <span class="Statement">==</span> TRUE<span class="Statement">)</span> <span class="Statement">then</span>
	make unstripped  													<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">else</span>
	make install														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">endif</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install embryo]&quot;</span>                                                           <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

make cleanall  															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>


<span class="Comment">#--------------------------------</span>
<span class="Comment"># Build pass (pipeline) processor </span>
<span class="Comment">#--------------------------------</span>

<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    ... Building pass application (executes arbitrary command pipeline connected to P3/PSRP server)&quot;</span>			<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>
<span class="Type">$BINDIR</span>/pupsconf <span class="Type">$arch</span>.<span class="Type">$pctarget</span> Make_pass.in Makefile										<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [configure pass]&quot;</span>                                                           <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

make -j<span class="Type">$nCores</span>          													<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [make pass]&quot;</span>                                                                <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$debug</span> <span class="Statement">==</span> TRUE<span class="Statement">)</span> <span class="Statement">then</span>
	make unstripped  													<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">else</span>
	make install														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">endif</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install pass]&quot;</span>                                                             <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

make cleanall   														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>


<span class="Comment">#-------------------------------------</span>
<span class="Comment"># Build fsw (smart filesystem watcher) </span>
<span class="Comment">#-------------------------------------</span>

<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3-2023 file system watcher (intelligently deals with full filesystems)&quot;</span>					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Type">$BINDIR</span>/pupsconf <span class="Type">$arch</span>.<span class="Type">$pctarget</span> Make_fsw.in Makefile										<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [configure fsw]&quot;</span>                                                            <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

make -j<span class="Type">$nCores</span>      														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed make fsw]&quot;</span>                                                                  <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$debug</span> <span class="Statement">==</span> TRUE<span class="Statement">)</span> <span class="Statement">then</span>
	make unstripped  													<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">else</span>
	make install														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">endif</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install fsw]&quot;</span>                                                              <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

make cleanall  															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>


<span class="Comment">#-----------------------------------------</span>
<span class="Comment"># Build protect (arbitrary file protector) </span>
<span class="Comment">#-----------------------------------------</span>

<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3-2023 file/directory protector (homeostatic protection for files and directories)&quot;</span>			<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Type">$BINDIR</span>/pupsconf <span class="Type">$arch</span>.<span class="Type">$pctarget</span> Make_protect.in Makefile									<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR  install_pupsP3: operation failed [configure protect]&quot;</span>                                                       <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

make -j<span class="Type">$nCores</span>    														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [make protect]&quot;</span>                                                             <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$debug</span> <span class="Statement">==</span> TRUE<span class="Statement">)</span> <span class="Statement">then</span>
	make unstripped  													<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">else</span>
	make install														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">endif</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install protect]&quot;</span>                                                          <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

make cleanall   														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>


<span class="Comment">#----------------------------------</span>
<span class="Comment"># Build xcat (extended cat command) </span>
<span class="Comment">#----------------------------------</span>

<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3-2023 extended file catenator (replacement for cat command))&quot;</span>						<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Type">$BINDIR</span>/pupsconf <span class="Type">$arch</span>.<span class="Type">$pctarget</span> Make_xcat.in Makefile										<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [configure xcat]&quot;</span>                                                           <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

make -j<span class="Type">$nCores</span>          													<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [make xcat]&quot;</span>                                                                <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$debug</span> <span class="Statement">==</span> TRUE<span class="Statement">)</span> <span class="Statement">then</span>
	make unstripped  													<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">else</span>
	make install														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">endif</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install xcat]&quot;</span>                                                             <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

make cleanall    														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>


<span class="Comment">#----------------------------------</span>
<span class="Comment"># Build xtee (extended tee command) </span>
<span class="Comment">#----------------------------------</span>

<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3-2023 extended pipeline tee (replacement for tee command))&quot;</span>						<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

<span class="Type">$BINDIR</span>/pupsconf <span class="Type">$arch</span>.<span class="Type">$pctarget</span> Make_xtee.in Makefile										<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [configure xtee]&quot;</span>                                                           <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

make -j<span class="Type">$nCores</span>          													<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [make xtee]&quot;</span>                                                                <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$debug</span> <span class="Statement">==</span> TRUE<span class="Statement">)</span> <span class="Statement">then</span>
	make unstripped  													<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">else</span>
	make install														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">endif</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install xtee]&quot;</span>                                                             <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

make cleanall   														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>


<span class="Comment">#-----------------------------------------</span>
<span class="Comment"># Build tcell (license violation detector) </span>
<span class="Comment">#-----------------------------------------</span>

<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    ... Building P3-2023 licence violation detector (terminates arbitrary process violating license)&quot;</span>			<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

<span class="Type">$BINDIR</span>/pupsconf <span class="Type">$arch</span>.<span class="Type">$pctarget</span> Make_tcell.in Makefile										<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [configure tcell]&quot;</span>                                                          <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

make -j<span class="Type">$nCores</span>  														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [make tcell]&quot;</span>                                                               <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$debug</span> <span class="Statement">==</span> TRUE<span class="Statement">)</span> <span class="Statement">then</span>
	make unstripped  													<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">else</span>
	make install														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">endif</span>
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install tcell]&quot;</span>                                                            <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                                      <span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

   <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

make cleanall   														<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>


<span class="Statement">if</span><span class="Statement">(</span>debug <span class="Statement">==</span> TRUE<span class="Statement">)</span> <span class="Statement">then</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    ----------------------------------------------------&quot;</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    Installing debuggable PUPS/P3 libraries and tools&quot;</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    ----------------------------------------------------&quot;</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>
<span class="Statement">endif</span>


<span class="Comment">#-----------------------------------------------</span>
<span class="Comment"># Copy PSRP bash profile to local home directory</span>
<span class="Comment">#-----------------------------------------------</span>

<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    ... installing P3 bash profile in '</span><span class="Type">$HOME</span><span class="Constant">'&quot;</span>										<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
\cp psrp_bash_profile <span class="Type">$HOME</span>/.psrp_bash_profile											<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">&lt;</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                             	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install PUPS/P3 bash profile]&quot;</span>                                          	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                             	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

    <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>


<span class="Comment">#----------------------------------------</span>
<span class="Comment"># Copy tool script to local bin directory</span>
<span class="Comment">#----------------------------------------</span>

<span class="Statement">echo</span> <span class="Constant">&quot;    ... installing P3 scripts in '</span><span class="Type">$BINDIR</span><span class="Constant">'&quot;</span>										<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
chmod +x uninstall_pups mantohtml manc tall pupsuname configure somake 								<span class="Statement">&gt;&amp;</span>  /dev/null
\cp  uninstall_pupsP3.csh mantohtml manc tall pupsuname configure somake <span class="Type">$BINDIR</span>						<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">&lt;</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                             	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install PUPS/P3 tool scripts]&quot;</span>                                           	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                             	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

    <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>


<span class="Comment">#-----------------------------------------------------------</span>
<span class="Comment"># Copy project templates to local project template directory </span>
<span class="Comment">#-----------------------------------------------------------</span>

<span class="Statement">echo</span> <span class="Constant">&quot;    ... installing P3 project templates in '</span><span class="Type">$PROJECTDIR</span><span class="Constant">'&quot;</span>									<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
\cp dll_skel.c dll_skelfunc.c lib_skel.c lib_skelfunc.c  Make_skelpapp.in  skelpapp.c <span class="Type">$PROJECTDIR</span>				<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                             	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install project templates]&quot;</span>                                             	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                             	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

    <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>


<span class="Comment">#--------------------------------------</span>
<span class="Comment"># Copy distribution to binary directory</span>
<span class="Comment">#--------------------------------------</span>

<span class="Statement">echo</span> <span class="Constant">&quot;    ... installing P3 binaries in '</span><span class="Type">$BINDIR</span><span class="Constant">'&quot;</span>										<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">pushd</span> ../bin															<span class="Statement">&gt;&amp;</span>  /dev/null
\mv * <span class="Type">$BINDIR</span> 															<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                             	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install PUPS/P3 distribution]&quot;</span>                                           	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                             	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

    <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

<span class="Statement">popd</span>																<span class="Statement">&gt;&amp;</span>  /dev/null


<span class="Comment">#------------------------------------</span>
<span class="Comment"># Copy libraries to library directory</span>
<span class="Comment">#------------------------------------</span>

<span class="Statement">echo</span> <span class="Constant">&quot;    ... installing P3 libaries in '</span><span class="Type">$LIBDIR</span><span class="Constant">'&quot;</span>										<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">pushd</span> ../lib															<span class="Statement">&gt;&amp;</span>  /dev/null
\cp * <span class="Type">$LIBDIR</span> 															<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                             	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install PUPS/P3 libraries]&quot;</span>                                              	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                             	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

    <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

<span class="Statement">popd</span>																<span class="Statement">&gt;&amp;</span>  /dev/null


<span class="Comment">#---------------------------------------</span>
<span class="Comment"># Copy header files to include directory </span>
<span class="Comment">#---------------------------------------</span>

<span class="Statement">echo</span> <span class="Constant">&quot;    ... installing P3 headers in '</span><span class="Type">$HDRDIR</span><span class="Constant">'&quot;</span>										<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">pushd</span> ../include.libs														<span class="Statement">&gt;&amp;</span>  /dev/null
\cp * <span class="Type">$HDRDIR</span> 															<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                             	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install PUPS/P3 headers]&quot;</span>                                                	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                             	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

    <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

<span class="Statement">popd</span>																<span class="Statement">&gt;&amp;</span>  /dev/null


<span class="Comment">#-------------------------------------------------</span>
<span class="Comment"># Copy (bash) signal mappings to project directory</span>
<span class="Comment">#-------------------------------------------------</span>


<span class="Statement">echo</span> <span class="Constant">&quot;    ... installing P3 signal mappings in '</span><span class="Type">$PROJECTDIR</span><span class="Constant">'&quot;</span>									<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
\cp export_pupsp3_sig.sh unset_pupsp3_sig.sh export_pupsp3_sig.csh unexport_pupsp3_sig.csh  <span class="Type">$PROJECTDIR</span>				<span class="Statement">&gt;&amp;</span> /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                             	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install PUPS/P3 signal mappings]&quot;</span>                                       	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                             	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

    <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>


<span class="Comment">#--------------------------------</span>
<span class="Comment"># Copy man pages to man directory</span>
<span class="Comment">#--------------------------------</span>

<span class="Statement">echo</span> <span class="Constant">&quot;    ... installing P3 manual pages in '</span><span class="Type">$MANDIR</span><span class="Constant">'&quot;</span>										<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
\cp ../man/man1/* <span class="Type">$MANDIR</span>/man1													<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                             	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install PUPS/P3 man1 pages]&quot;</span>                                            	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                             	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

    <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

\cp ../man/man3/* <span class="Type">$MANDIR</span>/man3													<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                             	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install PUPS/P3 man3 pages]&quot;</span>                                            	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                             	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

    <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>

\cp ../man/man7/* <span class="Type">$MANDIR</span>/man7													<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                             	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install PUPS/P3 man7 pages]&quot;</span>                                             	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
    <span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                             	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

    <span class="Statement">exit</span> <span class="Constant">255</span>
<span class="Statement">endif</span>


<span class="Comment">#-----------------------------------------</span>
<span class="Comment"># Debuggable libraries cannot be installed </span>
<span class="Comment">#-----------------------------------------</span>

<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$debug</span> <span class="Statement">==</span> FALSE<span class="Statement">)</span> <span class="Statement">then</span>


	<span class="Comment">#-------------------------------</span>
	<span class="Comment"># Install configuation directory</span>
	<span class="Comment">#-------------------------------</span>

	<span class="Statement">echo</span> <span class="Constant">&quot;    ... installing configuration directory (in '</span><span class="Type">$PROJECTDIR</span><span class="Constant">')&quot;</span>							<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">pushd</span> ../config.install													<span class="Statement">&gt;&amp;</span>  /dev/null

	./install_config.sh <span class="Type">$target</span> <span class="Type">$buildtype</span>											<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$status</span> <span class="Statement">!=</span> 0<span class="Statement">)</span> <span class="Statement">then</span>
		<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                        	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   		<span class="Statement">echo</span> <span class="Constant">&quot;    ERROR install_pupsP3: operation failed [install configuration directory]&quot;</span>                            	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
   		<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>                                                                                                        	<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

       		<span class="Statement">exit</span> <span class="Constant">255</span>
	<span class="Statement">endif</span>

	<span class="Statement">popd</span>                    												<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">endif</span>


<span class="Comment">#-------------------------------------</span>
<span class="Comment"># Additions to .tchrc (for tcsh users)</span>
<span class="Comment">#-------------------------------------</span>

<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    ---------------------------------------------------------------------------------&quot;</span>					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    If you use tcsh Make sure your ~/.tcshrc script has the following lines in it:&quot;</span>					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

<span class="Statement">if</span><span class="Statement">(</span><span class="Statement">`whoami`</span> <span class="Statement">==</span> root<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    setenv P3_CONFDIR /usr/include/p3&quot;</span>										<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

	<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$MACHTYPE</span> <span class="Statement">==</span> x86_64 <span class="Statement">||</span> <span class="Type">$MACHTYPE</span> <span class="Statement">==</span> aarch64<span class="Statement">)</span> <span class="Statement">then</span>
        	<span class="Statement">echo</span> <span class="Constant">&quot;    setenv LD_LIBRARY_PATH /usr/lib64 (should be set by default)&quot;</span>						<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">else</span>
        	<span class="Statement">echo</span> <span class="Constant">&quot;    setenv LD_LIBRARY_PATH /usr/lib (should be set by default)&quot;</span>						<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">endif</span>

<span class="Statement">else</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    setenv P3_CONFDIR ~/p3&quot;</span>											<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
       	<span class="Statement">echo</span> <span class="Constant">&quot;    setenv LD_LIBRARY_PATH ~/lib&quot;</span>											<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">endif</span>

<span class="Statement">echo</span> <span class="Constant">&quot;    ---------------------------------------------------------------------------------&quot;</span>					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>


<span class="Comment">#------------------------------------------</span>
<span class="Comment"># Additions to .profile (for bash/sh users)</span>
<span class="Comment">#------------------------------------------</span>

<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    ----------------------------------------------------------------------------------&quot;</span>					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    If you use bash/sh Make sure your ~/.profile script has the following lines in it:&quot;</span>					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

<span class="Statement">if</span><span class="Statement">(</span><span class="Statement">`whoami`</span> <span class="Statement">==</span> root<span class="Statement">)</span> <span class="Statement">then</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    export P3_CONFDIR=/usr/include/p3&quot;</span>										<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

	<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$MACHTYPE</span> <span class="Statement">==</span> x86_64 <span class="Statement">||</span> <span class="Type">$MACHTYPE</span> <span class="Statement">==</span> aarch64<span class="Statement">)</span> <span class="Statement">then</span>
        	<span class="Statement">echo</span> <span class="Constant">&quot;    export LD_LIBRARY_PATH=/usr/lib64 (should be set by default)&quot;</span>						<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">else</span>
        	<span class="Statement">echo</span> <span class="Constant">&quot;    export LD_LIBRARY_PATH=/usr/lib (should be set by default)&quot;</span>						<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">endif</span>

<span class="Statement">else</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    export P3_CONFDIR=</span><span class="Type">$HOME</span><span class="Constant">/p3&quot;</span>											<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
        <span class="Statement">echo</span> <span class="Constant">&quot;    export LD_LIBRARY_PATH=</span><span class="Type">$HOME</span><span class="Constant">/lib&quot;</span>										<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">endif</span>
<span class="Statement">endif</span>

<span class="Statement">echo</span> <span class="Constant">&quot;    ----------------------------------------------------------------------------------&quot;</span>					<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>


<span class="Statement">if</span><span class="Statement">(</span><span class="Type">$debug</span> <span class="Statement">==</span> TRUE<span class="Statement">)</span> <span class="Statement">then</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>															<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;    ... Marking P3-2023 libraries as debuggable&quot;</span>									<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
	<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>
	mkfile ../lib.<span class="Type">$arch</span>.linux.cluster/debug											<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">else</span>
	\rm ../lib.<span class="Type">$arch</span>.linux.cluster/debug											<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">endif</span>

<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    ... build of P3-2023 libraries and services complete&quot;</span>									<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

\rmdir BUILDLOCK														<span class="Statement">&gt;&amp;</span>/dev/null
<span class="Statement">exit</span> <span class="Constant">0</span>


<span class="Comment">#------------</span>
<span class="Comment"># Abort build</span>
<span class="Comment">#------------</span>

abort_build:

<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>
<span class="Statement">echo</span> <span class="Constant">&quot;    *** interrupted [PUPSP3]&quot;</span>												<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>
<span class="Statement">echo</span> <span class="Constant">&quot;&quot;</span>																<span class="Statement">&gt;&gt;&amp;</span> <span class="Type">$logFile</span>

\rmdir BUILDLOCK														<span class="Statement">&gt;&amp;</span>  /dev/null
<span class="Statement">exit</span> <span class="Constant">255</span>

</pre>
</body>
</html>
<!-- vim: set foldmethod=manual : -->
